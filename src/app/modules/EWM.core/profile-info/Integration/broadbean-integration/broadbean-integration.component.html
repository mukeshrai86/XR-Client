<!---
    @(C): Entire Software
    @Type: File, <html>
    @Who: maneesh
    @When: 20-Sep-2022
    @Why: EWM-7472
    @What:  This page is creted for Integration interface board UI Component HTML
-->
<!-- Entire Software : Satya Prakash Gupta : 02-Aug-2023 : restructure html page : EWM-13290 EWM-13308 -->
<div *ngIf="loading" class="logo-loader" id="logo-loader">
    <div class="logo-loading"></div>
</div>
<mat-card-header class="page-header" id="seek-integration-mat-card-header">
    <mat-card-title class="only-title ml-5">{{'label_partners' |translate}} </mat-card-title>

    <div class="header-action-button" id="tenant-feature-actionButton">
        <div class="group-header-button">
            <div class="jobBoardStatus">
                <span>{{'label_jobBoardConfiguration' |translate }}:</span>              
                 <!--------@suika @EWM-13242 @Whn 08-08-2023--------------------------->
                 <span class="new badge red mr-10 ml-0" *ngIf="visibilityStatus">
                    {{'label_emailConnected' | translate}}
                </span>
                <span class="new badge red mr-10 ml-0" *ngIf="!visibilityStatus">
                    {{'label_pending' | translate}}
                </span>
            </div> 
            <button mat-raised-button class="header-button" (click)="backToJob()"
                matTooltip="{{'label_backtointegrations'|translate}}"
                (mouseenter)="mouseoverAnimation(animationVar?.ActionsButton?.id, animationVar?.ActionsButton?.animation)"
                (mouseleave)="mouseleaveAnimation(animationVar?.ActionsButton?.id, animationVar?.ActionsButton?.animation)"
                matTooltipClass="card-list-tooltip" matTooltipPosition="before">
                <mat-icon id="{{animationVar?.ActionsButton?.id}}" class="{{animationVar?.ActionsButton?.isAnimClass}}">
                    keyboard_backspace</mat-icon>
            </button>
        </div>
    </div>
</mat-card-header>
<mat-drawer-container class="xeople-container-with-one-card" autosize id="seek-integration-drawer">
    <mat-card class="seek-mat-card component-card mat-elevation-z2" id="seek-mat-card">
        <div class="integration">
            <mat-card-subtitle class="subTitle">{{'label_BroadbeanJobPostAggregator' |translate}}</mat-card-subtitle>

            <div class="integration-header">
                <div class="integration-header-image">
                    <img src="{{LogoUrl}}" alt="integration-logo" />
                </div>
                <div class="integration-header-data" *ngIf="isCreateMode">
                    <button mat-stroked-button *ngIf="!visibilityStatus" id="getStartedId"
                        class="greenColorBtn" (click)="openSeekFormData('Add')">
                        {{'label_getStarted' |translate}}
                    </button>
                    <ng-container *ngIf="visibilityStatus">
                        <p>{{'label_broadBeanAdminText' | translate}}</p>
                        <button mat-stroked-button id="getDisconnectId" class="warnColorBtn"
                            (click)="disconnectPopUp();">
                            {{'label_emailDisconnect' |translate}}
                        </button>
                        <button mat-stroked-button id="getUpdateId" class="greenColorBtn"
                            (click)="openSeekFormData('edit'); selectedHighLight('updateSettings')"
                            [ngClass]="{'active': isActiveClass == 'updateSettings'}">
                            {{'label_updateSettings' |translate}}
                        </button>
                        <button mat-stroked-button id="getConfiguredId" disabled>
                            {{'label_jobBoardConfiguration'|translate}}
                        </button>
                        <button mat-stroked-button id="activeUsers" class="greenColorBtn"
                            (click)="onActivatedUsers(); selectedHighLight('activatUsers')"
                            [ngClass]="{'active': isActiveClass == 'activatUsers'}">
                            {{'lable_activatedUsers' |translate}}
                        </button>
                    </ng-container>
                    <span class="profileBuildBtn" id="tenantFeatureTag">
                        <mat-icon>local_offer</mat-icon>
                        {{TagCode}}
                    </span>
                </div>
            </div>

            <div *ngIf="showTabData" class="integration-contentsection">
                <p>{{Description}}</p>
                <div class="user-invitaion tab-container">
                    <mat-tab-group id='userinvitation-mtg'>
                        <mat-tab>
                            <ng-template mat-tab-label matRippleDisabled="disabled">
                                {{'label_snaps' | translate}}
                            </ng-template>
                            <swiper [slidesPerView]="screnSizePerStage" [spaceBetween]="0"
                                [navigation]="true" (swiper)="onSwiper($event)"
                                (slideChange)="onSlideChange()"
                                [ngClass]="screenPreviewClass" class="urOrderList">
                                <ng-template class="carousel-cell"
                                    *ngFor="let images of IntegrationImages" swiperSlide>
                                    <div class="stageListItems">
                                        <img src="{{images.ImageUrl}}" />
                                    </div>
                                </ng-template>
                            </swiper>
                        </mat-tab>
                        <mat-tab>
                            <ng-template mat-tab-label matRippleDisabled="disabled">
                                {{'label_video' | translate}}
                            </ng-template>
                            <swiper [slidesPerView]="screnSizePerStage" [spaceBetween]="0"
                                [navigation]="true" (swiper)="onSwiper($event)"
                                (slideChange)="onSlideChange()"
                                [ngClass]="screenPreviewClass" class="urOrderList">
                                <ng-template class="carousel-cell" swiperSlide>
                                    <div class="stageListItems">
                                        <video class="videoHeight" width="100%" controls>
                                            <source src="{{VideoUrl}}" type="video/mp4">
                                            <source src="{{VideoUrl}}" type="video/ogg">
                                            Your browser does not support HTML video.
                                        </video>
                                    </div>
                                </ng-template>
                            </swiper>
                        </mat-tab>
                        <mat-tab>
                            <ng-template mat-tab-label matRippleDisabled="disabled">
                                {{'label_contactDetails' |translate}}
                            </ng-template>
                            <mat-card class="contactDetailsSection">
                                <div class="contact-details">
                                    <p>{{'label_locationName' | translate}}</p>
                                    <span
                                        class="spnStyle">{{LocationName?LocationName:'--'}}</span>
                                </div>
                                <mat-divider class="mt-0 mb-0"></mat-divider>
                                <div class="contact-details">
                                    <p>{{'label_locationType' | translate}}</p>
                                    <span
                                        class="spnStyle">{{LocationType?LocationType:'--'}}</span>
                                </div>
                                <mat-divider class="mt-0 mb-0"></mat-divider>
                                <div class="contact-details">
                                    <p>{{'label_country' | translate}}</p>
                                    <span class="spnStyle">{{Country?Country:'--'}}</span>
                                </div>
                                <mat-divider class="mt-0 mb-0"></mat-divider>
                                <div class="contact-details">
                                    <p>{{'label_addressLine1' | translate}}</p>
                                    <span
                                        class="spnStyle">{{AddressLine1?AddressLine1:'--'}}</span>
                                </div>
                                <mat-divider class="mt-0 mb-0"></mat-divider>
                                <div class="contact-details">
                                    <p>{{'label_addressLine2' | translate}}</p>
                                    <span
                                        class="spnStyle">{{AddressLine2?AddressLine2:'--'}}</span>
                                </div>
                                <mat-divider class="mt-0 mb-0"></mat-divider>
                                <div class="contact-details">
                                    <p>{{'label_districtSuburb' | translate}}</p>
                                    <span class="spnStyle">{{District?District:'--'}}</span>
                                </div>
                                <mat-divider class="mt-0 mb-0"></mat-divider>
                                <div class="contact-details">
                                    <p>{{'label_city' | translate}}</p>
                                    <span class="spnStyle">{{TownCity?TownCity:'--'}}</span>
                                </div>
                                <mat-divider class="mt-0 mb-0"></mat-divider>
                                <div class="contact-details">
                                    <p>{{'label_state' | translate}}</p>
                                    <span class="spnStyle">{{State?State:'--'}}</span>
                                </div>
                                <mat-divider class="mt-0 mb-0"></mat-divider>
                                <div class="contact-details">
                                    <p>{{'label_Zipcode' | translate}}</p>
                                    <span class="spnStyle">{{PostalCode?PostalCode:'--'}}</span>
                                </div>
                            </mat-card>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </div>

            <div *ngIf="showSeekFormData" class="integration-contentsection">
                <div class="seekDetails">
                    <form [formGroup]="seekIntegrationForm" class="p-0">
                        <mat-form-field>
                            <mat-label>{{'label_clientId' |translate}}</mat-label>
                            <input matInput tabindex="3" formControlName="ClientId"
                                text="APIKey" id="APIKey" required>
                                        
                            <mat-error
                                *ngIf="seekIntegrationForm.controls['ClientId'].hasError('required')">
                                {{'label_clientId' |translate}} {{'label_errorreqired'
                                |translate}}
                            </mat-error>
                            <mat-error
                                *ngIf="seekIntegrationForm.controls['ClientId'].hasError('maxlength')">
                                {{'label_clientId' |translate}} {{'label_errormaxlength150'
                                |translate}}
                            </mat-error>
                            <mat-error
                                *ngIf="seekIntegrationForm.controls['ClientId'].hasError('whitespace') && !seekIntegrationForm.controls['ClientId'].hasError('required')">
                                {{'label_nameValidation' |translate}}
                            </mat-error>

                            <button matSuffix *ngIf="i>0" mat-raised-button color="warn"
                                type="button" id="btnDelete" (click)="deleteItem(i)"
                                class="id-del-btn ml-5 ml-5">
                                <mat-icon>delete</mat-icon>
                            </button>
                            <mat-icon matSuffix color="warn"
                                matTooltip="{{'label_APIKeyhelpIconText' |translate}}"
                                matTooltipPosition="left" matSuffix>info_outline
                            </mat-icon>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>{{'lable_secretKey' |translate}}
                            </mat-label>
                            <input matInput tabindex="3" formControlName="ClientSecret"
                                text="APISecretKey" id="APISecretKey" required>
                            <mat-error
                                *ngIf="seekIntegrationForm.controls['ClientSecret'].hasError('required')">
                                {{'lable_secretKey' |translate}}
                                {{'label_errorreqired' |translate}}
                            </mat-error>
                            <mat-error
                                *ngIf="seekIntegrationForm.controls['ClientSecret'].hasError('maxlength')">
                                {{'lable_secretKey' |translate}} {{'label_errormaxlength150'
                                |translate}}
                            </mat-error>
                            <mat-error
                                *ngIf="seekIntegrationForm.controls['ClientSecret'].hasError('whitespace') && !seekIntegrationForm.controls['ClientSecret'].hasError('required')">
                                {{'label_nameValidation' |translate}}

                            </mat-error>
                            <mat-icon matSuffix color="warn"
                                matTooltip="{{'label_APISecretKeyhelpIcon' |translate}}"
                                matTooltipPosition="left" matSuffix>info_outline
                            </mat-icon>
                        </mat-form-field>
                        <div class="ng-slectBox ng-select-with-info-icon">
                            <ng-select placeholder="{{'lable_planType'|translate}}*"
                                [clearable]="true" tabindex="2" formControlName="PlanType"
                                id="planType" (change)="onPlanType($event)">
                                <ng-option *ngFor="let list of planTypeList"
                                    value="{{list.Id}}">{{list.PlanType}}</ng-option>
                            </ng-select>
                                    
                            <mat-error
                                *ngIf="seekIntegrationForm.controls['PlanType'].hasError('required') && seekIntegrationForm.controls['PlanType'].touched">
                                {{'lable_planType' |translate}}
                                {{'label_errorreqired'|translate}}
                            </mat-error>
                            <mat-icon color="warn" class="infoStyle"
                                matTooltip="{{'label_planTypehelpIcon' |translate}}"
                                matTooltipPosition="left" matSuffix>info_outline
                            </mat-icon>
                                
                        </div>
                        <div class="actionButton">
                            <button mat-raised-button tabindex="11" color="warn"
                                (click)="onCancel()" id="btnCancel"
                                class="buttonForDesktopMobile">
                                <mat-icon>close</mat-icon>
                                <span class="buttonTxt">{{'label_cancel' |translate}}</span>
                            </button>

                            <button mat-raised-button *ngIf="activestatus=='Add'"
                                color="primary" (click)="onSave(this.seekIntegrationForm.getRawValue())"
                                type="button" id="btnSave"
                                [disabled]="!seekIntegrationForm.valid" tabindex="10"
                                class="buttonForDesktopMobile">
                                <mat-icon>check</mat-icon>
                                <span class="buttonTxt">{{'label_save'|translate}}</span>
                            </button>
                            <button mat-raised-button *ngIf="activestatus=='Edit'"
                                color="primary" (click)="onSave(this.seekIntegrationForm.getRawValue())"
                                [disabled]="!seekIntegrationForm.valid" type="button"
                                id="btnUpdate" tabindex="10" class="buttonForDesktopMobile">
                                <mat-icon>check</mat-icon>
                                <span class="buttonTxt">{{'label_update'|translate}}</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="integration-contentsection" *ngIf="isActivatedUsers">
                <button mat-fab class="add-new-user-broadbean"
                    matTooltip="{{'label_add'|translate}} {{'label_new'|translate}} {{'label_colUser'|translate}}"
                    color="primary" id="btnAdd"  matTooltipPosition="left"
                    (click)="onAddActivatedUsersPopUp()">
                    <mat-icon id="add">add</mat-icon>
                </button>
                <div class="kendo-table-container locked-column-by-css">
                    <ng-template #template let-anchor>
                        <span>{{ anchor.nativeElement.innerText}}</span>
                    </ng-template>
                    <div kendoTooltip #tooltip="kendoTooltip" showOn="none"
                        position="bottom" [tooltipTemplate]="template">
                        <kendo-grid [kendoGridBinding]="activatedUsersgridViewList"
                            [ngStyle]="{'width': innerWidth}" [reorderable]="true"
                            [sortable]="true" [sort]="sort" [scrollable]="'virtual'"
                            [reorderable]="false" [resizable]="true"
                            (sortChange)="sortChange($event)"
                            (scrollBottom)="pageChange($event)">
                            <kendo-grid-column
                                [width]="65" [minResizableWidth]="80">
                                <ng-template class="expanIconCol" kendoGridCellTemplate let-dataItem>
                                    <button mat-icon-button id="btnDelete" color="warn"
                                        (click)="onDeleteBroadbeanUsersById(dataItem.UserId)"
                                        matTooltip="{{'label_delete'|translate}}" matTooltipClass="custom-tooltip" >
                                        <mat-icon>delete</mat-icon>
                                    </button>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column field="UserName"
                                title="{{'label_mailName'|translate}}" [width]="210" [minResizableWidth]="80">
                                <ng-template class="expanIconCol" kendoGridCellTemplate let-dataItem>
                                    <span matTooltip="{{dataItem.UserName}}" matTooltipClass="custom-tooltip">
                                        {{dataItem.UserName}}
                                    </span>
                                </ng-template>
                            
                            </kendo-grid-column>

                            <kendo-grid-column field="EmailId" [width]="210"
                                title="{{'label_emailId'|translate}}"
                                [minResizableWidth]="100">
                                <ng-template class="expanIconCol" kendoGridCellTemplate let-dataItem>
                                    <span matTooltip="{{dataItem.EmailId}}" matTooltipClass="custom-tooltip">
                                        {{dataItem.EmailId}}
                                    </span>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column title="{{'label_Access'|translate}}"
                                [width]="100" [minResizableWidth]="80">
                                <ng-template class="expanIconCol" kendoGridCellTemplate
                                    let-dataItem>
                                    <div class="toggleMain" >
                                    <mat-slide-toggle tabindex="1" color="primary" matTooltip="On/Off" matTooltipClass="custom-tooltip"
                                    id="toggleId{{dataItem.Id}}"
                                        [checked]="dataItem?.IsAccess === 1"
                                        (change)="checkBroadbeanUserIdAlreadyInUse($event,dataItem)">
                                    </mat-slide-toggle>
                                    </div>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column
                                title="{{'label_systemAuditUsername'|translate}}"
                                [width]="210" [minResizableWidth]="80" field="BroadbeanUserId">
                                <ng-template class="expanIconCol" kendoGridCellTemplate
                                    let-dataItem>
                                    <span matTooltip="{{dataItem.BroadbeanUserId}}" matTooltipClass="custom-tooltip">
                                        {{dataItem.BroadbeanUserId}}
                                    </span>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column title="{{'label_lastactivity'|translate}}"
                                [width]="290" [minResizableWidth]="80" field="LastActivity">
                                <ng-template class="expanIconCol" kendoGridCellTemplate
                                    let-dataItem>
                                    <span matTooltip=" {{(dataItem.LastActivity!=0?dataItem.LastActivity :'')|
                                    date:userpreferences.timeformate:userpreferences.timezone}}" matTooltipClass="custom-tooltip">
                                    {{(dataItem.LastActivity!=0?dataItem.LastActivity :'')|
                                    date:userpreferences.timeformate:userpreferences.timezone}}
                                    </span>
                                    
                                </ng-template>
                            </kendo-grid-column>
                        </kendo-grid>
                        <div *ngIf="loadingscroll" class="k-i-loading kendolist-loader">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </mat-card>
</mat-drawer-container>