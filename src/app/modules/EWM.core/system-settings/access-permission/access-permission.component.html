<!---
    @(C): Entire Software
    @Type: File, <html>
    @Who: Adarsh singh
    @When: 20-Dec-2020
    @Why: access permission 4245
    @What: access-permission change page
-->

<div *ngIf="loading" class="logo-loader" id="logo-loader">
    <div class="logo-loading"></div>
</div>

<mat-card-header class="dashboard-mat-card-header title-and-btn" id="client-dashboard-dashboard-mat-card-header">
    <mat-card-title class="only-title p-0">
      <span>{{'access_permission' |customTranslate}}</span>
      <app-breadcrumb [pageLabel]="pageLabel" class="bread-crumb"></app-breadcrumb>
    </mat-card-title>

    <div class="actionButton listGridButton" id="action-button" *ngIf="formtitle=='grid'">
        <!-- <button mat-raised-button [ngClass]="[ viewMode === 'cardMode' ? '' : 'active']" class="listButton"
            (click)="switchListMode('listMode')" id="noteCategory-viewcardInactive">
            <span class="material-icons">
                format_list_bulleted
            </span>
        </button> -->
        <button mat-raised-button class="gridButton" [routerLink]="['manage-access-permission']"
        [queryParams]="{V:viewMode}"
             id="noteCategory-viewcardActive">
            <span class="material-icons">
                settings
            </span>
        </button>
    </div>
  </mat-card-header>

<mat-drawer-container class="xeople-container-with-one-card" autosize id="dashboard-drawer">
<mat-card class="component-card mat-elevation-z2" id="component-card">
    <!-- <button  (click)="updateSetting(this.accessPermissionForm.value)">Btn</button> -->
        
    
    <div id="contentdata">
        <!-- <a mat-raised-button class="refreshBtn" (click) ="refreshComponent()" color="primary" 
    id="btnRefresh" matTooltip="{{'label_refreshBtn'|translate}}" matTooltipClass="custom-tooltip">
    <mat-icon>rotate_right</mat-icon>
    </a> -->
        <div class="sticky" *ngIf="formtitle=='grid'" [ngClass]="[ viewMode === 'cardMode' ? ' ' : 'sticky-width']">

            <div class="row mb-0 listHeader" id="listHeader" [class.hide]="isvisible">
                <div class="col col-5">
                    <button mat-button [disableRipple]="true" id="noteCategory-userType">
                        <strong>{{'access_permission_text'|translate}}</strong>
                        <mat-icon *ngIf="sortedcolumnName === 'UserTypeName' && sortDirection === 'asc'">{{ascIcon}}
                        </mat-icon>
                        <mat-icon *ngIf="sortedcolumnName === 'UserTypeName' && sortDirection === 'desc'">{{descIcon}}
                        </mat-icon>
                    </button>
                </div>

                <div class="col col-1">
                    <button mat-button [disableRipple]="true" id="noteCategory-userType">
                        <strong>{{'label_status'|translate}}</strong>
                        <mat-icon *ngIf="sortedcolumnName === 'UserTypeName' && sortDirection === 'asc'">{{ascIcon}}
                        </mat-icon>
                        <mat-icon *ngIf="sortedcolumnName === 'UserTypeName' && sortDirection === 'desc'">{{descIcon}}
                        </mat-icon>
                    </button>
                </div>

                <div class="col col-4">
                    <button mat-button [disableRipple]="true" id="noteCategory-StatusName">
                        <strong>{{'label_LastUpdatedOn'|translate}}</strong>
                        <mat-icon *ngIf="sortedcolumnName === 'StatusName' && sortDirection === 'asc'">{{ascIcon}}
                        </mat-icon>
                        <mat-icon *ngIf="sortedcolumnName === 'StatusName' && sortDirection === 'desc'">{{descIcon}}
                        </mat-icon>
                    </button>
                </div>
                <div class="col col-4  center-align">
                    <button mat-button [disableRipple]="true" id="noteCategory-LastUpdated">
                        <strong>{{'label_actions'|translate}}</strong>
                        <mat-icon *ngIf="sortedcolumnName === 'LastUpdated' && sortDirection === 'asc'">{{ascIcon}}
                        </mat-icon>
                        <mat-icon *ngIf="sortedcolumnName === 'LastUpdated' && sortDirection === 'desc'">{{descIcon}}
                        </mat-icon>
                    </button>
                </div>


            </div>
        </div>
        <div class="listCardView" id="listCardView"
            [ngClass]="[ viewMode === 'cardMode' ? 'card-infinite-scroll' : 'listcardContentMaxData list-infinite-scroll']"
            *ngIf="formtitle=='grid'" infinite-scroll [infiniteScrollDistance]="pageOption" [infiniteScrollThrottle]="pagesize"
            [scrollWindow]="false">
            <div id="contentdata" [ngClass]="[ viewMode === 'cardMode' ? 'cardContent' : 'listContent']">
                <div class="row">
                    <div *ngIf="loadingPopup" class="list"></div>
                    <div class="col nodata" *ngIf="this.accessData==undefined ||this.accessData.length==0">
                        <span>{{'label_noRecordAvailable'|translate}}</span>
                    </div>
                    <div class="col" [ngClass]="[ viewMode === 'cardMode' ? 'cardWidth' : 'l12 m12 s12 alternetBG']" id="accessBox_{{i}}"
                        *ngFor="let accessPermissionData of accessData;let i =index" [@letterAnim4]="{value: animationState, params: { delay:delaAnimation(i)} }">

                        <mat-card class="p-0" [ngClass]="[ viewMode === 'cardMode' ? 'CarMode' : '']">
                            <mat-card-content class="listcardContent"
                                [ngClass]="[ viewMode === 'cardMode' ? 'cardHeight' : 'pt-0 pb-0']">
                                <!-----list data start------------>
                                <div class="row mb-0" [ngClass]="[ viewMode === 'cardMode' ? 'maxData hide' : '']">

                                    <div class="col col-5"
                                        [ngClass]="[ viewMode === 'cardMode' ? 'actionBox hide' : 'col-5']">
                                        <b>{{accessPermissionData.AccessName}}</b>
                                        <p class="m-0">{{accessPermissionData.Description}}</p>
                                    </div>

                                    <div class="col"
                                        [ngClass]="[ viewMode === 'cardMode' ? 'card-header' : 'hide']">
                                        <strong>{{'label_usertype'|translate}}</strong>
                                    </div>
                                    <div class="col col-1"
                                        [ngClass]="[ viewMode === 'cardMode' ? 'card-data' : 'col-1']">
                                        <span class="cardListTxt word-wrap"
                                            matTooltip="{{accessPermissionData.StatusName }}"
                                            matTooltipClass="custom-tooltip">
                                            {{accessPermissionData.StatusName }}
                                        </span>
                                    </div>

                                    <div class="col"
                                        [ngClass]="[ viewMode === 'cardMode' ? 'card-header' : 'hide']">
                                        <strong>{{'label_status'|translate}}</strong>
                                    </div>
                                    <div class="col col-4"
                                        [ngClass]="[ viewMode === 'cardMode' ? 'card-data' : 'col-4']">
                                        <span class="cardListTxt word-wrap"
                                            matTooltip="{{accessPermissionData.LastUpdated | date:userpreferences.timeformate:userpreferences.timezone}}"
                                            matTooltipClass="custom-tooltip">
                                            {{accessPermissionData.LastUpdated |
                                            date:userpreferences.timeformate:userpreferences.timezone}}
                                        </span>
                                    </div>

                                    <div class="col"
                                        [ngClass]="[ viewMode === 'cardMode' ? 'card-header' : 'hide']">
                                        <strong>{{'label_lastupdate'|translate}}</strong>
                                    </div>
                                    <div class="col col-4 center-align"
                                        [ngClass]="[ viewMode === 'cardMode' ? 'card-data' : 'col-4 center-align']">
                                        <mat-slide-toggle tabindex="4" color="primary"
                                        [checked]="accessPermissionData.Status == 1"
                                            (change)="toggleVisibility($event.checked,i,accessPermissionData)">
                                        </mat-slide-toggle>
                                    </div>

                                </div>
                                <!-----list data end------------>
                                <!-- card mode -->
                                    <div [ngClass]="[ viewMode === 'cardMode' ? '' : 'hide']">
                                    <div class="cardModeLine">
                                    <span class="spacer"></span>
                                    <span class="badge red cursor" id="Qualification-status">
                                        <strong>{{'label_status'|translate}}</strong> :
                                        {{accessPermissionData.StatusName}}
                                    </span>
                                    </div>
                                    <div class="row mb-5 mt-15">
                                    <div class="col l6 m6 s12">
                                        <div class="col card-header s">
                                        <strong>{{'access_permission_text'|translate}}</strong>
                                        </div>
                                        <div class="col card-data" id="label-shortdesc" matTooltip="{{accessPermissionData.AccessName}}"
                                        matTooltipClass="custom-tooltip">
                                        <span class="cardListTxt word-wrap cursor">
                                            {{accessPermissionData.AccessName}}
                                        </span>
                                        </div>
                                    </div>
                                    <div class="col l6 m6 s12">
                                        <div class="col card-header ss">
                                        <strong>{{'label_LastUpdatedOn'|translate}}</strong>
                                        </div>
                                        <div class="col card-data" id="label-disseq">
                                        <span class="cardListTxt word-wrap cursor"
                                            matTooltip="{{accessPermissionData.LastUpdated | date:userpreferences.timeformate:userpreferences.timezone}}"
                                            matTooltipClass="custom-tooltip">
                                            {{accessPermissionData.LastUpdated | date:userpreferences.timeformate:userpreferences.timezone}}
                                        </span>
                                        </div>
                                    </div>
                
                                    </div>

                                    <div class="go-corner">
                                    <ng-container *ngIf="accessPermissionData.IsSys=='0'">
                                    <a mat-icon-button color="primary" [routerLink]="['manage-notes-category']"
                                        [queryParams]="{Id:accessPermissionData.Id,V:viewMode}" id="btnEdit" matTooltipClass="custom-tooltip"
                                        matTooltip="{{'label_edit'|translate}}" *appHasPermission="['Edit']">
                                        <mat-icon>edit</mat-icon>
                                    </a>
                                    <button mat-icon-button color="warn" id="btnDelete"
                                        matTooltipClass="custom-tooltip"
                                        matTooltip="{{'label_delete'|translate}}" *appHasPermission="['Delete']">
                                        <mat-icon>delete</mat-icon>
                                    </button>
                                    </ng-container>
                                    </div>
                                </div>
                                <!-- card mode -->
                            </mat-card-content>

                        </mat-card>
                    </div>
                </div>
                <div *ngIf="loadingscroll" class="k-i-loading scrollloading"></div>
            </div>
        </div>

    </div>
</mat-card>
</mat-drawer-container>