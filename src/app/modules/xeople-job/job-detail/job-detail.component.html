<!--- Modified for CR:@(C): Entire Software:@Type: File, <html>:@Who: Satya Prakash Gupta:@When: 31-Aug-2022:@Why: EWM-7477 EWM-8480:@What: Header structure change-->
<div class="progress-loader-box" *ngIf="loadingHeader">
  <div class="progress-loader">
    <div class="loaderBar"></div>
  </div>
</div>
<div class="job-detail-header" id="canidate-header" [ngClass]="headerExpand ? '' : 'header-collapse-layout'">
  <div class="dynmic-bg-color"></div>
  <!-- <div *ngIf="IsJobClosed==1" class="logo-loader logo-loader-candidate"></div> -->
  <div class="canidate-header-container" id="canidate-header-container">
    <div class="canidate-header-left">
      <div class="job-profile-details">
        <div class="medal-and-rank-name" matTooltip="{{'quickjob_jobRank'|translate}} : {{JobDetails?.JobRank}}"
          matTooltipClass="custom-tooltip"
          [ngStyle]="{'background-color': JobDetails?.JobRankColor == '#ffffff' ? '#5844DA' : JobDetails?.JobRankColor}">
          <mat-icon class="medal">workspace_premium</mat-icon>
          <span class="text-overflow rank-circle">{{JobDetails?.JobRank}}</span>
        </div>
        <div class="desktop-job-status-sec">
          <ng-container *ngTemplateOutlet="headerLeftBox"></ng-container>
        </div>
        <ng-template #headerLeftBox>
          <button appDisableIfJobClosed [isJobClosed]="IsJobClosed" mat-raised-button color="primary" class="ml-0 candidate-btn-publish" id="candidate-btn-publish"
            matTooltip="{{'label_publishOn'|translate}} ({{JobDetails?.PublishedJobCount}})">
            <div class="published-button-txt">
              <span>{{'label_publishedOn'|translate}} ({{JobDetails?.PublishedJobCount}})</span>

              <button  appDisableIfJobClosed 
              [isJobClosed]="IsJobClosed"  mat-icon-button id="published-trending-button" (click)="publishButtonPopup()"
                (mouseenter)="mouseoverAnimation(animationVar?.PublishedTrendingButton?.id, animationVar?.PublishedTrendingButton?.animation)"
                (mouseleave)="mouseleaveAnimation(animationVar?.PublishedTrendingButton?.id, animationVar?.PublishedTrendingButton?.animation)">
                <mat-icon fontSet="material-icons-outlined" id="{{animationVar?.PublishedTrendingButton?.id}}"
                  class="{{animationVar?.PublishedTrendingButton?.isAnimClass}}"
                  >trending_up</mat-icon>
              </button>

            </div>
          </button>
          <div class="job-short-info">
            <span *ngIf="getResponseEmailPhone?.JobReferenceId == null">--</span>
            <span *ngIf="getResponseEmailPhone?.JobReferenceId != null"
              matTooltip="{{getResponseEmailPhone?.JobReferenceId}}"
              matTooltipClass="custom-tooltip">{{getResponseEmailPhone?.JobReferenceId}}</span>
            <mat-icon matTooltip="{{'label_JobRefIdDesc'|translate}}" matTooltipClass="custom-tooltip"
              fontSet="material-icons-outlined">info</mat-icon>
          </div>
          <div class="job-short-info">
            <span *ngIf="getResponseEmailPhone?.JobType == null">--</span>
            <span *ngIf="getResponseEmailPhone?.JobType != null" matTooltip="{{getResponseEmailPhone?.JobType}}"
              matTooltipClass="custom-tooltip">{{getResponseEmailPhone?.JobType}}</span>
            <mat-icon matTooltip="{{'label_JobTypeDesc'|translate}}" matTooltipClass="custom-tooltip"
              fontSet="material-icons-outlined">info</mat-icon>
          </div>
          <div class="job-short-info">
            <span *ngIf="getResponseEmailPhone?.Experience == null">--</span>
            <span *ngIf="getResponseEmailPhone?.Experience != null" matTooltip="{{getResponseEmailPhone?.Experience}}"
              matTooltipClass="custom-tooltip">{{getResponseEmailPhone?.Experience}}</span>
            <mat-icon matTooltip="{{'label_jobsummary_experience'|translate}}" matTooltipClass="custom-tooltip"
              fontSet="material-icons-outlined">info</mat-icon>
          </div>
        </ng-template>
      </div>
      <!---------@When: 24-08-2023 @who:Amit @why: EWM-14003 @what: id add in expand view--------->
      <div class="candidate-profile-info expandData" id="candidate-profile-info-expand">

        <div class="jobdetail-header-info collapseExpandData" id="jobdetail-header-info-expand-expand">
          <div class="jobdetail-header-info-txt" id="jobdetail-header-info-txt-expand-expand">
            <mat-icon matTooltip="{{'label_jobTitle'|translate}}" matTooltipClass="custom-tooltip" class="dark-btn" id="work-expand-btn">work
            </mat-icon>
            <span matTooltip="{{JobDetails?.JobTitle}}"
              matTooltipClass="custom-tooltip" id="job-title-expand-text">{{JobDetails?JobDetails.JobTitle:''}}</span>
          </div>
          <div  appDisableIfJobClosed 
          [isJobClosed]="IsJobClosed"  class="group-btn" id="WorkNorthEastBtn"
            (mouseenter)="mouseoverAnimation(animationVar?.WorkNorthEastButton?.id, animationVar?.WorkNorthEastButton?.animation)"
            (mouseleave)="mouseleaveAnimation(animationVar?.WorkNorthEastButton?.id, animationVar?.WorkNorthEastButton?.animation)"
            (click)="openjobDetailsView()" cdkOverlayOrigin #trigger="cdkOverlayOrigin">
            <mat-icon fontSet="material-icons-outlined" color="primary" id="Job-btn-ThreedotId"
              id="{{animationVar?.WorkNorthEastButton?.id}}"
              class="{{animationVar?.WorkNorthEastButton?.isAnimClass}}">north_east</mat-icon>
          </div>
        </div>

        <div class="jobdetail-header-info  collapseExpandData blue-bg" id="jobdetail-header-info-expand-blue-expand"
          *ngIf="JobDetails?.ClientId!=null && JobDetails?.ClientId!='00000000-0000-0000-0000-000000000000'">
          <div class="jobdetail-header-info-txt" id="jobdetail-header-info-txt-blue-expand">
            <mat-icon matTooltip="{{'label_cover_client_name'|translate}}" matTooltipClass="custom-tooltip"
              class="dark-btn" id="business-expand-btn">business
            </mat-icon>
            <span matTooltip="{{JobDetails?.ClientName}}" matTooltipClass="custom-tooltip" id="client-expand-text">
              {{JobDetails?JobDetails?.ClientName:''}}
            </span>
          </div>
          <div  appDisableIfJobClosed 
          [isJobClosed]="IsJobClosed"  class="group-btn" id="BusinessNorthEastBtn"
            (mouseenter)="mouseoverAnimation(animationVar?.BusinessNorthEastButton?.id, animationVar?.BusinessNorthEastButton?.animation)"
            (mouseleave)="mouseleaveAnimation(animationVar?.BusinessNorthEastButton?.id, animationVar?.BusinessNorthEastButton?.animation)">
            <mat-icon fontSet="material-icons-outlined" color="primary" id="Job-btn-ThreedotId"
              (click)="openClientDetail()" cdkOverlayOrigin #trigger="cdkOverlayOrigin"
              id="{{animationVar?.BusinessNorthEastButton?.id}}"
              class="{{animationVar?.BusinessNorthEastButton?.isAnimClass}}">north_east</mat-icon>
          </div>
        </div>

        <div class="jobdetail-header-info collapseExpandData orange-bg" id="jobdetail-header-info-expand-orange-expand">
          <div class="jobdetail-header-info-txt" id="jobdetail-header-info-txt-expand-orange-expand">
            <mat-icon matTooltip="{{'label_location'|translate}}" matTooltipClass="custom-tooltip" class="dark-btn"
             id="location-expand-btn">
              location_on
            </mat-icon>
                <!-- who:maneesh,what:ewm-15058 for add location ,when:07/11/2023 -->
                <span  matTooltip="{{JobDetails?.Location !='' || JobDetails?.Location!=null ? JobDetails?.Location : ''}}"
                matTooltipClass="custom-tooltip" id="location-title-text">
                {{JobDetails?.Location =='' || JobDetails?.Location==null ? '--' : JobDetails?.Location}}
              </span>
          </div>
          <div  appDisableIfJobClosed 
          [isJobClosed]="IsJobClosed"  class="group-btn" id="LocationOpenNewBtn"
            (mouseenter)="mouseoverAnimation(animationVar?.LocationOpenNewButton?.id, animationVar?.LocationOpenNewButton?.animation)"
            (mouseleave)="mouseleaveAnimation(animationVar?.LocationOpenNewButton?.id, animationVar?.LocationOpenNewButton?.animation)">
            <mat-icon fontSet="material-icons-outlined" color="primary" id="Job-btn-ThreedotId"
              (click)="openNewTabForClientGoogleMapLocation(JobDetails.Latitude,JobDetails.Longitude,JobDetails.Location)"
              class="dark-btn" id="{{animationVar?.LocationOpenNewButton?.id}}"
              class="{{animationVar?.LocationOpenNewButton?.isAnimClass}}">
              open_in_new</mat-icon>
          </div>
        </div>

        <div class="jobdetail-header-info collapseExpandData" id="jobdetail-header-info-expand-contact-expand">
          <div class="jobdetail-header-info-txt" id="jobdetail-header-info-txt-expand-contact-expand">
            <mat-icon matTooltip="{{'label_contacts'|translate}}" matTooltipClass="custom-tooltip" class="dark-btn" id="badge-expand-icon">
              badge</mat-icon>
              <!-- @When: 21-09-2023 @who:Amit @why: EWM-14386 @what: condition add -->
            <span *ngIf="largeEmailsAndPhonesData?.length == 0" style="text-align: center;">--</span>
            <div class="company-contacts" *ngIf="largeEmailsAndPhonesData">
              <div class="company-contacts-btn-groups" *ngFor="let emailOrPhones of largeEmailsAndPhonesData">
                <div class="userAvtaarAndName tooltip tooltip-bottom" id="screening-userAvtaar">
                  <img class="tooltip-trigger" *ngIf="emailOrPhones?.ProfileImage != null" src="{{profileImagePreview}}"
                    tabindex>
                    <!-- who:maneesh,what:ewm-13134 for background color in short name,when:13/07/2023  -->
                  <span class="tooltip-trigger"  [style.background]="getBackgroundColor(emailOrPhones?.ShortName)" *ngIf="emailOrPhones?.FullName != null"
                    tabindex id="short-name-expand">{{emailOrPhones?.ShortName}}</span>
                  <div class="tooltip-drop" id="tooltip-drop-expand">
                    <img class="short-image" *ngIf="emailOrPhones?.ProfileImage != null" src="{{profileImagePreview}}"
                      tabindex>
                    <!-- who:maneesh,what:ewm-13134 for background color in short name,when:13/07/2023  -->
                    <span class="short-name" id="short-name-expand-new" [style.background]="getBackgroundColor(emailOrPhones?.ShortName)" *ngIf="emailOrPhones?.FullName != null"
                      tabindex>{{emailOrPhones?.ShortName}}</span>
                    <div class="user-name">{{emailOrPhones?.FullName}}</div>
                    <!-- <mat-icon matTooltip="{{'label_edit'|translate}}" matTooltipClass="custom-tooltip" class="dark-btn">
                      edit</mat-icon> -->
                  </div>
                </div>


                <button appDisableIfJobClosed [isJobClosed]="IsJobClosed" mat-icon-button color="primary" (click)="openMailSync(emailOrPhones, false)"
                  matTooltip="{{'label_email' | translate}}" matTooltipClass="custom-tooltip" id="mail-outline-expand-btn">
                  <mat-icon>mail_outline</mat-icon>
                </button>

                <a appDisableIfJobClosed [isJobClosed]="IsJobClosed" mat-icon-button color="primary" type="button"
                  href="tel:{{emailOrPhones?.Phone}}" matTooltip="{{'label_phone' | translate}}"
                  matTooltipClass="custom-tooltip" id="phone-outline-expand-btn">
                  <mat-icon [ngStyle]="{'cursor':zoomCheckStatus === false ? '' : 'pointer' }">phone</mat-icon>
              </a>

              </div>

              <div class="company-contacts-btn-groups" id="company-contacts-btn-groups-expand-new"
                *ngIf="this.EmailsAndPhonesData!= null && this.EmailsAndPhonesData?.length>2">
                <button mat-icon-button appDisableIfJobClosed [isJobClosed]="IsJobClosed" color="primary" class="more-owner-show" id="btnMore">
                  <span class="extra-more" *ngIf="EmailsAndPhonesData?.length<=999" matTooltipClass="custom-tooltip"
                    matTooltip="{{EmailsAndPhonesData?.length-2}} {{'label_more' | translate}}..">+{{EmailsAndPhonesData?.length-2}}</span>
                  <mat-icon *ngIf="EmailsAndPhonesData?.length>999" matTooltipClass="custom-tooltip"
                    matTooltip="999 {{'label_more' | translate}}..">...</mat-icon>
                </button>
              </div>
            </div>
          </div>

          <div class="group-btn">
            <!-- @When: 26-09-2023 @who:Amit @why: EWM-14465 @what: animation add -->
          <div>
            <button  appDisableIfJobClosed 
            [isJobClosed]="IsJobClosed"  mat-icon-button  class="all-status" id="Edit" (click)="openjobDetailsViewOwner(trigger, 'contact')" cdkOverlayOrigin
            #trigger="cdkOverlayOrigin"
            (mouseenter)="mouseoverAnimation(animationVar?.ContactEditButton?.id, animationVar?.ContactEditButton?.animation)"
            (mouseleave)="mouseleaveAnimation(animationVar?.ContactEditButton?.id, animationVar?.ContactEditButton?.animation)">
            <mat-icon matTooltip="{{'label_edit' |translate}} {{'label_contact'|translate}}"
            matTooltipClass="custom-tooltip" id="{{animationVar?.ContactEditButton?.id}}"
            class="{{animationVar?.ContactEditButton?.isAnimClass}}">
              edit
            </mat-icon>
          </button>
            <button mat-icon-button appDisableIfJobClosed [isJobClosed]="IsJobClosed" color="primary" id="Job-btn-ThreedotId_north_east"
              [disabled]="this.EmailsAndPhonesData!= null && (this.EmailsAndPhonesData?.length>2 )== false"
              [matMenuTriggerFor]="showEmailsPhones"
              (mouseenter)="mouseoverAnimation(animationVar?.ContactSouthEastButton?.id, animationVar?.ContactSouthEastButton?.animation)"
              (mouseleave)="mouseleaveAnimation(animationVar?.ContactSouthEastButton?.id, animationVar?.ContactSouthEastButton?.animation)">
              <mat-icon fontSet="material-icons-outlined" id="{{animationVar?.ContactSouthEastButton?.id}}"
                class="{{animationVar?.ContactSouthEastButton?.isAnimClass}}">
                south_east
              </mat-icon>
            </button>
          </div>
            <mat-menu #showEmailsPhones="matMenu" class="all-owner-list owner-hover-list"
              id="respinsiveSidebarDropdown">
              <mat-list role="list">
                <ng-container *ngFor="let emailPhoneData of smallEmailsAndPhonesData, let i = index;">
                  <mat-list-item class="contact-mat-list" >
                    <div class="company-contacts-btn-groups">
                            <!-- @Who: Bantee Kumar,@Why:EWM-13187,@When: 14-July-2023,@What:Company Contacts name in not showing in job details header -->
                      <span matTooltip="{{emailPhoneData?.Name}}" matTooltipClass="custom-tooltip"
                        class="jobAgeBoxTimer text-overflow">{{emailPhoneData?.FullName}}</span>
                      <div class="group-btn">
                        <button mat-icon-button color="primary" (click)="openMailSync(emailPhoneData, false)"
                          matTooltip="{{'label_email' | translate}}" matTooltipClass="custom-tooltip">
                          <mat-icon class="jobAgeBoxTimer">mail_outline</mat-icon>
                        </button>
                        <a mat-icon-button  color="primary" type="button"
                          href="tel:{{emailPhoneData?.Phone}}" matTooltip="{{'label_phone' | translate}}"
                          matTooltipClass="custom-tooltip">
                          <mat-icon [ngStyle]="{'cursor':zoomCheckStatus === false ? '' : 'pointer' }"
                            class="jobAgeBoxTimer">phone
                          </mat-icon>
                        </a>
                      </div>
                    </div>
                  </mat-list-item>
                </ng-container>
              </mat-list>
            </mat-menu>
          </div>
        </div>

        <div class="jobdetail-header-info">
          <div class="jobdetail-header-info-txt">
            <mat-icon matTooltip="{{'quickjob_owners'|translate}}" matTooltipClass="custom-tooltip" class="dark-btn">
              face_6</mat-icon>
            <div class="multiple-owner-sec">
              <div *ngFor="let OwnersNameData of largeScreenTagDataOwner" class="multiple-owner">
                <div class="userAvtaarAndName tooltip tooltip-bottom">

                  <img class="tooltip-trigger" *ngIf="OwnersNameData?.OwnerProfileImageUrl!=''"
                    src="{{OwnersNameData?.OwnerProfileImageUrl}}" />
                    <!-- who:maneesh,what:ewm-13134 for background color in short name,when:13/07/2023  -->
                  <span class="tooltip-trigger" [style.background]="getBackgroundColor(OwnersNameData?.ShortName)"
                    *ngIf="OwnersNameData?.OwnerProfileImageUrl==''">{{OwnersNameData?.ShortName}}</span>
                  <div class="tooltip-drop">
                    <img class="short-image" *ngIf="OwnersNameData?.OwnerProfileImageUrl!=''"
                      src="{{OwnersNameData?.OwnerProfileImageUrl}}" />
                    <!-- who:maneesh,what:ewm-13134 for background color in short name,when:13/07/2023  -->
                    <span class="short-name"  [style.background]="getBackgroundColor(OwnersNameData?.ShortName)"
                      *ngIf="OwnersNameData?.OwnerProfileImageUrl==''">{{OwnersNameData?.ShortName}}</span>
                    <div class="user-name">{{OwnersNameData?.OwnerName}}</div>
                  </div>
                </div>
              </div>
              <button mat-icon-button color="primary"
                *ngIf="((this.OwnersList != undefined)&&(this.OwnersList != null)&&(this.OwnersList?.length>10))"
                class="more-owner-show" id="btnMore">
                <span class="extra-more" *ngIf="OwnersList?.length<=999" matTooltipClass="custom-tooltip"
                  matTooltip="{{OwnersList?.length-10}} {{'label_more' | translate}}..">+{{OwnersList?.length-10}}</span>
                <mat-icon *ngIf="OwnersList?.length>999" matTooltipClass="custom-tooltip"
                  matTooltip="999 {{'label_more' | translate}}..">more_horiz</mat-icon>
              </button>
              <mat-menu #showAllOwner="matMenu" class="all-owner-list owner-hover-list" id="respinsiveSidebarDropdown">
                <mat-list role="list">
                  <ng-container *ngFor="let OwnersNameData of smallScreenTagDataOwner, let i = index;">
                    <mat-list-item>
                      <div class="userAvtaarAndName mr-5">
                        <img *ngIf="OwnersNameData?.OwnerProfileImageUrl!=''"
                          src="{{OwnersNameData?.OwnerProfileImageUrl}}" />
                    <!-- who:maneesh,what:ewm-13134 for background color in short name,when:13/07/2023  -->
                        <span  [style.background]="getBackgroundColor(OwnersNameData?.ShortName)"
                          *ngIf="OwnersNameData?.OwnerProfileImageUrl==''">{{OwnersNameData?.ShortName}}</span>
                      </div>
                      <span class="jobAgeBoxTimer">{{OwnersNameData?.OwnerName | titlecase}}</span>
                    </mat-list-item>
                  </ng-container>
                </mat-list>
              </mat-menu>
            </div>
          </div>
          <div class="group-btn" style="display: flex;">

          <!-- @When: 26-09-2023 @who:Amit @why: EWM-14465 @what: animation add -->
          <button  appDisableIfJobClosed 
          [isJobClosed]="IsJobClosed"  mat-icon-button id="jobdetailsEditBtn" (click)="openjobDetailsViewOwner(trigger,'ownersData')" cdkOverlayOrigin
            #trigger="cdkOverlayOrigin"
            (mouseenter)="mouseoverAnimation(animationVar?.OwnerEditButton?.id, animationVar?.OwnerEditButton?.animation)"
            (mouseleave)="mouseleaveAnimation(animationVar?.OwnerEditButton?.id, animationVar?.OwnerEditButton?.animation)">
            <mat-icon matTooltip="{{'label_edit' |translate}} {{'quickjob_owners'|translate}}"
            matTooltipClass="custom-tooltip" id="{{animationVar?.OwnerEditButton?.id}}"
            class="{{animationVar?.OwnerEditButton?.isAnimClass}}">
              edit
            </mat-icon>
          </button>

            <button appDisableIfJobClosed [isJobClosed]="IsJobClosed" mat-icon-button color="primary" id="Job-btn-ThreedotId" [matMenuTriggerFor]="showAllOwner"
              [disabled]="this.OwnersList!= null && (this.OwnersList?.length>10 )== false"
              (mouseenter)="mouseoverAnimation(animationVar?.OwnerSouthEastButton?.id, animationVar?.OwnerSouthEastButton?.animation)"
              (mouseleave)="mouseleaveAnimation(animationVar?.OwnerSouthEastButton?.id, animationVar?.OwnerSouthEastButton?.animation)">
              <mat-icon fontSet="material-icons-outlined" id="{{animationVar?.OwnerSouthEastButton?.id}}"
                class="{{animationVar?.OwnerSouthEastButton?.isAnimClass}}">
                south_east
              </mat-icon>
            </button>
          </div>

        </div>

        <div class="jobdetail-header-info">

          <div class="jobdetail-header-info-txt">
            <mat-icon matTooltip="{{'label_JobOwners_Primary'|translate}}" matTooltipClass="custom-tooltip" class="dark-btn">
              accessibility
            </mat-icon>
            <div class="profile-name-show">
              <div class="multiple-owner-sec">
                <div class="multiple-owner">
                  <div class="userAvtaarAndName tooltip tooltip-bottom">
                    <img class="tooltip-trigger" *ngIf="PrimaryOwner?.OwnerProfileImageUrl!=''"
                      src="{{PrimaryOwner?.OwnerProfileImageUrl}}" />
                    <span [style.background]="getBackgroundColor(PrimaryOwner?.ShortName)"
                      *ngIf="PrimaryOwner?.OwnerProfileImageUrl==''">{{PrimaryOwner?.ShortName}}</span> 
                  </div>
                </div>
              </div>
              <div id="currentStatusData">{{PrimaryOwner?.OwnerName}}</div>
            </div>
          </div>

          <div class="group-btn" style="display: flex;">
            <button  appDisableIfJobClosed 
            [isJobClosed]="IsJobClosed"  mat-icon-button id="jobdetailsEditBtn" (click)="openjobDetailsViewOwner(trigger,'ownersData')" cdkOverlayOrigin
            #trigger="cdkOverlayOrigin" class="all-status"
            (mouseenter)="mouseoverAnimation(animationVar?.configureEmailSave?.id, animationVar?.configureEmailSave?.animation)"
            (mouseleave)="mouseleaveAnimation(animationVar?.configureEmailSave?.id, animationVar?.configureEmailSave?.animation)">
            <mat-icon matTooltip="{{'label_edit' |translate}} {{'label_JobOwners_Primary'|translate}}"
            matTooltipClass="custom-tooltip" id="{{animationVar?.configureEmailSave?.id}}"
            class="{{animationVar?.configureEmailSave?.isAnimClass}}">
              edit
            </mat-icon>
          </button>
          </div>

        </div>

        <mat-menu #addCandidateMenu="matMenu" class="tagOpentMenu">
          <div class="pl-15 pr-15" (click)="$event.stopPropagation();">
            <mat-form-field class="remove-bottom-matinput">
              <input matInput type="text" id="candidate-tagSearch" [(ngModel)]="searchTextTag" name="searchTextEWM"
                placeholder="{{'label_search'|translate}}" [ngModelOptions]="{standalone: true}" />

              <button *ngIf="searchTextTag" matSuffix mat-icon-button aria-label="Clear" (click)="searchTextTag=''">
                <mat-icon>close</mat-icon>
              </button>
            </mat-form-field>
          </div>
          <div class="blank-height10" (click)="$event.stopPropagation();"></div>
          <div class="tag-list-data">
            <button class="tagList mat-menu-item" *ngFor="let tag of JobTags | NameFilter:searchTextTag:'Name'"
              (click)="selectTagList($event,tag)" matTooltip="{{tag.Name}}" matTooltipClass="custom-tooltip">
              <mat-icon [style.color]="tag.ColorCode">local_offer</mat-icon>
              <span class="text-overflow">
                {{tag.Name}}
              </span>
              <span class="spacer"></span>
              <mat-slide-toggle class="mat-slide-toggle" [checked]="tag.IsSelected===1?'true':'false'" color="primary">
              </mat-slide-toggle>
            </button>
          </div>
          <div class="blank-height10" (click)="$event.stopPropagation();"></div>
        </mat-menu>
        <!-- Three DOT Start -->
        <mat-menu #mobileViewTag="matMenu" class="mobile-view-tag candidateQuickMenu" id="respinsiveSidebarDropdown"
          [overlapTrigger]="false">
          <button *ngFor="let tag of smallScreenTagData" mat-button class="mobile-view-tag-list"
            id="job-btn-smallScreenTagId" matTooltip="{{ tag.Name }}" matTooltipClass="custom-tooltip">
            <mat-icon [style.color]="tag.Color">local_offer</mat-icon>
            {{ tag.Name }}
          </button>
        </mat-menu>
        <!-- three dot End -->
      </div>

      <!---------@When: 24-08-2023 @who:Amit @why: EWM-14003 @what: id add in collapse view--------->
      <div class="candidate-profile-info collapseExpandData" id="candidate-profile-info-collapse">

        <div class="jobdetail-header-info collapseExpandData" id="jobdetail-header-info-collapse">

          <div class="jobdetail-header-info-txt" id="jobdetail-header-info-txt-collapse">
            <mat-icon matTooltip="{{'label_jobTitle'|translate}}" matTooltipClass="custom-tooltip" class="dark-btn" id="work-icon">work
            </mat-icon>

            <span matTooltip="{{JobDetails?.JobTitle}}"
              matTooltipClass="custom-tooltip" id="job-title-text">{{JobDetails?JobDetails.JobTitle:''}}</span>
          </div>
        </div>

        <div class="jobdetail-header-info collapseExpandData blue-bg" id="jobdetail-header-info-blue-collapse"
          *ngIf="JobDetails?.ClientId!=null && JobDetails?.ClientId!='00000000-0000-0000-0000-000000000000'">
          <div class="jobdetail-header-info-txt" id="jobdetail-header-info-txt-blue-collapse">
            <mat-icon matTooltip="{{'label_cover_client_name'|translate}}" matTooltipClass="custom-tooltip"
              class="dark-btn" id="business-icon">business
            </mat-icon>
            <span matTooltip="{{JobDetails?.ClientName}}" matTooltipClass="custom-tooltip" id="client-title-text">
              {{JobDetails?JobDetails?.ClientName:''}}
            </span>
          </div>
        </div>

        <div class="jobdetail-header-info collapseExpandData orange-bg" id="jobdetail-header-info-orange-collapse">
          <div class="jobdetail-header-info-txt" id="jobdetail-header-info-txt-orange-collapse">
            <mat-icon matTooltip="{{'label_location'|translate}}" matTooltipClass="custom-tooltip" class="dark-btn" id="location-icon">
              location_on
            </mat-icon>
              <!-- who:maneesh,what:ewm-15058 for add location ,when:07/11/2023 -->
              <span  matTooltip="{{JobDetails?.Location !='' || JobDetails?.Location!=null ? JobDetails?.Location : ''}}"
              matTooltipClass="custom-tooltip" id="location-title-text">
              {{JobDetails?.Location =='' || JobDetails?.Location==null ? '--' : JobDetails?.Location}}
            </span>
          </div>
        </div>

        <div class="jobdetail-header-info collapseExpandData" id="jobdetail-header-info-contact-collapse">
          <div class="jobdetail-header-info-txt" id="jobdetail-header-info-txt-contact-collapse">
            <mat-icon matTooltip="{{'label_contacts'|translate}}" matTooltipClass="custom-tooltip" class="dark-btn" id="badge-icon">
              badge</mat-icon>
            <span *ngIf="largeEmailsAndPhonesData?.length == 0" style="text-align: center;" id="contact-title-text">--</span>
            <div class="company-contacts" id="company-contacts-collapse" *ngIf="largeEmailsAndPhonesData">
              <div class="company-contacts-btn-groups" id="company-contacts-btn-groups-collapse" *ngFor="let emailOrPhones of largeEmailsAndPhonesData">
                <div class="userAvtaarAndName tooltip tooltip-bottom" id="screening-userAvtaar">
                  <img class="tooltip-trigger" *ngIf="emailOrPhones?.ProfileImage != null" src="{{profileImagePreview}}"
                    tabindex>
                    <!-- who:maneesh,what:ewm-13134 for background color in short name,when:13/07/2023  -->
                  <span class="tooltip-trigger" id="tooltip-trigger-collapse" [style.background]="getBackgroundColor(emailOrPhones?.ShortName)" *ngIf="emailOrPhones?.ProfileImage == null"
                    tabindex>{{emailOrPhones?.ShortName}}</span>
                  <div class="tooltip-drop" id="tooltip-drop-collapse">
                    <img class="short-image" *ngIf="emailOrPhones?.ProfileImage != null" src="{{profileImagePreview}}"
                      tabindex>
                    <!-- who:maneesh,what:ewm-13134 for background color in short name,when:13/07/2023  -->
                    <span class="short-name" id="short-name-collapse" [style.background]="getBackgroundColor(emailOrPhones?.ShortName)" *ngIf="emailOrPhones?.ProfileImage == null"
                      tabindex>{{emailOrPhones?.ShortName}}</span>
                    <div class="user-name" id="user-name">{{emailOrPhones?.FullName}}</div>
                  </div>
                </div>
                <button appDisableIfJobClosed [isJobClosed]="IsJobClosed" mat-icon-button color="primary" (click)="openMailSync(emailOrPhones, false)"
                  matTooltip="{{'label_email' | translate}}" matTooltipClass="custom-tooltip" id="mail-btn">
                  <mat-icon>mail_outline</mat-icon>
                </button>
                <a mat-icon-button appDisableIfJobClosed [isJobClosed]="IsJobClosed"  color="primary"
                  href="tel:{{emailOrPhones?.Phone}}"
                  matTooltip="{{'label_phone' | translate}}"
                  matTooltipClass="custom-tooltip" id="phone-btn">
                  <mat-icon [ngStyle]="{'cursor':zoomCheckStatus === false ? '' : 'pointer' }">phone</mat-icon>
                </a>
              </div>
              <div class="company-contacts-btn-groups" id="company-contacts-btn-new-groups-collapse"
                *ngIf="this.EmailsAndPhonesData!= null && this.EmailsAndPhonesData?.length>2">
                <button appDisableIfJobClosed [isJobClosed]="IsJobClosed" mat-icon-button color="primary" class="more-owner-show" id="btnMore">
                  <span class="extra-more" *ngIf="EmailsAndPhonesData?.length<=999" matTooltipClass="custom-tooltip"
                    matTooltip="{{EmailsAndPhonesData?.length-2}} {{'label_more' | translate}}..">+{{EmailsAndPhonesData?.length-2}}</span>
                  <mat-icon *ngIf="EmailsAndPhonesData?.length>999" matTooltipClass="custom-tooltip"
                    matTooltip="999 {{'label_more' | translate}}..">...</mat-icon>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="job-status">
        <div class="jobAge">
          <mat-card class="jobAgeBox ml-0">
            <div class="job-box-data">
              <div class="jobAgeBoxLabel" matTooltip="{{'label_skills' |translate}}" matTooltipClass="custom-tooltip">
                <mat-icon>hotel_class</mat-icon>
              </div>

              <span *ngIf="this.skillData?.length == 0" style="text-align: center;">--</span>
              <span *ngFor="let skill of largeSkill | slice : 0 : 3" tabindex matTooltip="{{skill?.SkillName}}"
                class="skils-job-detail" matTooltipClass="custom-tooltip">
                {{skill?.SkillName}}
              </span>

              <div class="company-contacts-btn-groups">
                <button appDisableIfJobClosed [isJobClosed]="IsJobClosed"  mat-button color="primary" class="more-owner-show" id="btnMore"
                  *ngIf="this.skillData!= null && this.skillData?.length>3">
                  <span class="extra-more" *ngIf="skillData?.length<=999" matTooltipClass="custom-tooltip"
                    matTooltip="{{skillData?.length-3}} {{'label_more' | translate}}..">+{{skillData?.length-3}}</span>
                  <mat-icon *ngIf="skillData?.length>999" matTooltipClass="custom-tooltip"
                    matTooltip="999 {{'label_more' | translate}}..">...</mat-icon>
                </button>

                <mat-menu #showSkillData="matMenu" class="all-owner-list owner-hover-list"
                  id="respinsiveSidebarDropdown">
                  <mat-list role="list">
                    <ng-container *ngFor="let smallSkill of largeSkill | slice : 3 : skillData?.length">
                      <mat-list-item>
                        <div class="company-contacts-btn-groups">
                          <div *ngIf="smallSkill?.SkillName != null">
                            <span tabindex matTooltip="{{smallSkill?.SkillName}}"
                              class="jobAgeBoxTimer currentJobStatus"
                              matTooltipClass="custom-tooltip">{{smallSkill?.SkillName}}</span>
                          </div>
                        </div>
                      </mat-list-item>
                    </ng-container>
                  </mat-list>
                </mat-menu>
              </div>
            </div>

            <div class="group-btn">
              <mat-icon id="all-status" class="all-status no-cursor" color="primary" matTooltip="{{'label_SkillsDesc'|translate}}"
                matTooltipClass="custom-tooltip" fontSet="material-icons-outlined">info</mat-icon>

              <button appDisableIfJobClosed [isJobClosed]="IsJobClosed" mat-icon-button [disabled]="this.skillData!= null && (this.skillData?.length>3 )== false"
                id="all-status" class="all-status" color="primary" [matMenuTriggerFor]="showSkillData"
                (mouseenter)="mouseoverAnimation(animationVar?.SkillSouthEastButton?.id, animationVar?.SkillSouthEastButton?.animation)"
                (mouseleave)="mouseleaveAnimation(animationVar?.SkillSouthEastButton?.id, animationVar?.SkillSouthEastButton?.animation)">
                <mat-icon id="{{animationVar?.SkillSouthEastButton?.id}}"
                  class="{{animationVar?.SkillSouthEastButton?.isAnimClass}}">
                  south_east
                </mat-icon>
              </button>
            </div>
          </mat-card>

          <mat-card class="jobAgeBox ml-0">
            <div class="job-box-data">
              <div class="jobAgeBoxLabel" matTooltip="{{'label_cureentStatus' |translate}}"
                matTooltipClass="custom-tooltip">
                <mat-icon>waterfall_chart</mat-icon>
              </div>
              <div id="currentStatusData">{{currentStatus}}</div>
            </div>
          <div class="group-btn">
            <button  appDisableIfJobClosed 
            [isJobClosed]="IsJobClosed"  mat-icon-button
            id="currentStatusOpen" class="all-status" color="primary" (click)="openStatus()"
            (mouseenter)="mouseoverAnimation(animationVar?.StatusInfoButton?.id, animationVar?.StatusInfoButton?.animation)"
            (mouseleave)="mouseleaveAnimation(animationVar?.StatusInfoButton?.id, animationVar?.StatusInfoButton?.animation)">
            <mat-icon matTooltip="{{'label_edit' |translate}} {{'label_templateStatus'|translate}}"
            matTooltipClass="custom-tooltip"
                id="{{animationVar?.StatusInfoButton?.id}}"
                class="{{animationVar?.StatusInfoButton?.isAnimClass}}">
              edit
            </mat-icon>
          </button>
          <mat-icon fontSet="material-icons-outlined" id="all-status" class="all-status no-cursor" color="primary"
            matTooltip="{{currentStatusReasonName}}" matTooltipClass="custom-tooltip">info</mat-icon>
          </div>

          </mat-card>
          <mat-card class="jobAgeBox ml-0">
            <div class="job-box-data">
              <div class="jobAgeBoxLabel" matTooltip="{{'label_AgeingOfJob' |translate}}"
                matTooltipClass="custom-tooltip">
                <mat-icon>legend_toggle</mat-icon>
              </div>
              <!-- Entire Software : Amit Rajput : 10-May-2022 : Tooltip Add : EWM-5987 -->
              <div class="jobAgeBoxTimer" matTooltip="{{JobPostDate|dayscounttillsecontsbydate:'From'}}
          ({{JobPostDate|date:userpreferences.timeformate:userpreferences.timezone}})"
                matTooltipClass="custom-tooltip">
                {{JobPostDate|dayscounttillsecontsbydate:'From'}}
                ({{JobPostDate|date:userpreferences.timeformate:userpreferences.timezone}})</div>
            </div>
          </mat-card>
          <mat-card class="jobAgeBox">
            <div class="job-box-data">
              <div class="jobAgeBoxLabel" matTooltip="{{'label_ExpireIn' |translate}}" matTooltipClass="custom-tooltip">
                <mat-icon>event_note</mat-icon>
              </div>
              <!---------@When: 14-03-2023 @who:Adarsh singh @why: Desc - Display job expired with date when job expired --------->
              <div *ngIf="days" class="jobAgeBoxTimer" [ngClass]="isExpiredJob ?'reverseCounterred':''"
                matTooltip="{{fullDate}}" matTooltipClass="custom-tooltip">{{fullDate}}</div>
              <!-- End  -->
            </div>
          </mat-card>
          <!-- @Who: Ankit Rawat,@Why: EWM-17602,@When: 23Jul24,@What:Added Primary Owner -->
          
          <mat-card class="jobAgeBox ml-0">
            <div class="job-box-data">
              <div class="jobAgeBoxLabel">
                <mat-icon matTooltip="{{'quickjob_tags'|translate}}" matTooltipClass="custom-tooltip" class="dark-btn">
                  local_offer</mat-icon>
              </div>

              <span *ngIf="tagSelecteditem?.length == 0" style="text-align: center;">--</span>
              <div class="tag-list">
                <div *ngFor="let selectTag of largeScreenTagData" class="tag-name text-overflow"
                  id="job-btn-selectedTagId" matTooltip="{{selectTag.Name}}" matTooltipClass="custom-tooltip">
                  <mat-icon [style.color]="selectTag.ColorCode">local_offer</mat-icon>
                  <span class="text-overflow">{{selectTag.Name}}</span>
                </div>
                <span *ngIf="this.tagSelecteditem?.length >2">({{this.smallScreenTagData.length}})</span>
              </div>

              

              
            </div>
          <div class="group-btn" style="display: flex;">
            <button  appDisableIfJobClosed 
            [isJobClosed]="IsJobClosed"  mat-icon-button color="primary" id="candidate-btn-add-tag" class="all-status" [matMenuTriggerFor]="addCandidateMenu"
                (click)="searchTextTag=''" matTooltip="{{'quickjob_tags'|translate}}" matTooltipClass="custom-tooltip"
                (mouseenter)="mouseoverAnimation(animationVar?.TagAddButton?.id, animationVar?.TagAddButton?.animation)"
                (mouseleave)="mouseleaveAnimation(animationVar?.TagAddButton?.id, animationVar?.TagAddButton?.animation)">
                <mat-icon id="{{animationVar?.TagAddButton?.id}}" class="{{animationVar?.TagAddButton?.isAnimClass}}">add
                </mat-icon>
              </button>
              <button  appDisableIfJobClosed 
              [isJobClosed]="IsJobClosed"  mat-icon-button color="primary" id="Job-btn-ThreedotId_Icon" class="all-status" #mobileSide="matMenuTrigger"
                [matMenuTriggerFor]="mobileViewTag"
                [disabled]="this.tagSelecteditem!= null && (this.tagSelecteditem?.length>2 )== false"
                (mouseenter)="mouseoverAnimation(animationVar?.TagSouthEastButton?.id, animationVar?.TagSouthEastButton?.animation)"
                (mouseleave)="mouseleaveAnimation(animationVar?.TagSouthEastButton?.id, animationVar?.TagSouthEastButton?.animation)">
                <mat-icon fontSet="material-icons-outlined" id="{{animationVar?.TagSouthEastButton?.id}}"
                  class="{{animationVar?.TagSouthEastButton?.isAnimClass}}">
                  south_east
                </mat-icon>
              </button>
          
          </div>

          </mat-card>

          <mat-card class="jobAgeBox ml-0 data-sync" id="sync-data">
            <div class="job-box-data" matTooltip="Synced to EOH on February 24, 2025 09:06:57 AM with Job ID: CLI000005" 
            matTooltipClass="custom-tooltip">
              <div class="jobAgeBoxLabel">
                  <mat-icon class="dark-btn" svgIcon="tick"></mat-icon>
              </div>
              <span>{{'label_SyncedTo' | translate}}</span>
              <img class="eoh-logo" src="/assets/brand/{{EOHLogo}}">
              <span class="text-overflow">on February 24, 2025 09:06:57 AM with Job ID: CLI000005</span>
            </div>
          
          </mat-card>

        </div>
      </div>
      <div class="job-detail-chart" id="job-detail-chart" *ngIf="hideChartOnHeaderCollpase">
        <div class="progress-loader-box" *ngIf="pieloading">
          <div class="progress-loader">
            <div class="loaderBar"></div>
          </div>
        </div>

        <p *ngIf="pieData?.length == 0 || totalSource==0" class="center">No data found</p>
        <div class="card-fadeloader" *ngIf="pieloading"></div>
        <div  appDisableIfJobClosed 
        [isJobClosed]="IsJobClosed"  id="piechart" *ngIf="totalSource!=0">
          <a (click)="refresh()" *ngIf="totalSource!=0" class="sourced"><span>{{'label_sourced'|translate}} :
              {{totalSource}}</span></a>
          <a (click)="refresh()" *ngIf="totalSource==0" class="sourced"><span>{{'label_sourced'|translate}} :
              0</span></a>
          <div class="apex-chart">
            <apx-chart [series]="cOptions?.series" [chart]="cOptions?.chart" [labels]="cOptions?.labels"
              [stroke]="cOptions?.stroke" id="piechartdata"></apx-chart>
          </div>
        </div>
      </div>
    </div>

    <div class="canidate-header-right">
      <div class="candidate-action">
        <!--@When: 29-11-2023 @who:Amit @why: EWM-15264 @what: add back btn-->
        <button type="button" id="backToJobBtn" color="primary" mat-mini-fab [queryParams]="{filter:selectjobcatparam}" [routerLink]="['/client/jobs/job/job-list/list',WorkflowId]"
        matTooltip="{{'label_backToJobLanding' | customTranslate}}" matTooltipClass="card-list-tooltip" matTooltipPosition="before" [ngClass]="IsJobClosed==1?'close-job-style':''"
        (mouseenter)="mouseoverAnimation(animationVar?.BackButton?.id, animationVar?.BackButton?.animation)"
        (mouseleave)="mouseleaveAnimation(animationVar?.BackButton?.id, animationVar?.BackButton?.animation)">
        <mat-icon id="{{animationVar?.BackButton?.id}}" class="{{animationVar?.BackButton?.isAnimClass}}">
          keyboard_backspace
        </mat-icon>
      </button>

        <!-- @When: 20-Nov-2023 @who:Satya Prakash Gupta @why: EWM-15148 EWM-15168 @what: close label change -->
        <button [ngClass]="IsJobClosed==1?'close-job-style':''" type="button" color="primary" id="candidateActionBtn" mat-mini-fab [matMenuTriggerFor]="beforeMenu"
          (mouseenter)="mouseoverAnimation(animationVar?.ThreeDotButton?.id, animationVar?.ThreeDotButton?.animation)"
          (mouseleave)="mouseleaveAnimation(animationVar?.ThreeDotButton?.id, animationVar?.ThreeDotButton?.animation)">
          <mat-icon id="{{animationVar?.ThreeDotButton?.id}}" class="{{animationVar?.ThreeDotButton?.isAnimClass}}">
            more_vert
          </mat-icon>
        </button>
        <mat-menu #beforeMenu="matMenu" xPosition="before" class="menu-dropdown">
          <div class="mobile-job-status-sec">
            <mat-divider class="mt-0 mb-0"></mat-divider>
            <div class="publish-sec">
              <ng-container *ngTemplateOutlet="headerLeftBox"></ng-container>
            </div>
          </div>
          <div class="mobile-job-chart-sec">
            <mat-divider class="mt-0 mb-0"></mat-divider>
            <div class="job-chart">
              <div class="job-chart-list" *ngFor="let label of cOptions?.labels">{{label}}</div>
            </div>
            <mat-divider class="mt-0 mb-0"></mat-divider>
          </div>
          <!---------@suika @EWM-11782 EWM-12504 Action labels --------->
          <!--@When: 04-07-2023 @who:Amit @why: EWM-12927 @what:add class condition & same stage label-->
          <button mat-button id="Actions" class="share-job-app" [disabled]="selectedCandidates?.length > NoOfCanSelectedEachStage || getSelectedCandidatesSameStageFlag()"
            (click)="openActionView()" cdkOverlayOrigin #trigger="cdkOverlayOrigin" [ngClass]="selectedCandidates?.length!=0 && getSelectedCandidatesSameStageFlag()? 'same-stage-show' : ''">
            <mat-icon fontSet="material-icons-outlined">fact_check</mat-icon>
            <!--@When: 04-09-2023 @who:Amit @why: EWM-13874 @what: add id-->
              <span class="share-job" id="share-job">
              <span>{{'label_Actions' | translate}}</span>
              <!--@When: 28-09-2023 @who:Amit @why: label issue @what: label design-->
              <span class="add-span new badge red" *ngIf="selectedCandidates?.length > 0 && getSelectedCandidatesSameStageFlag() && NoOfCanSelectedEachStage >= selectedCandidates?.length">{{'label_stageCanSelectionErr' | translate}}</span>
              <span class="new badge red" style="color:red" *ngIf="selectedCandidates?.length > NoOfCanSelectedEachStage">{{'label_jobdetails_MaxCandSelectionError' | translate}} {{NoOfCanSelectedEachStage}}</span>
              </span>
          </button>
          <button appDisableIfJobClosed 
          [isJobClosed]="IsJobClosed" mat-button id="jobDetailsAccept" (click)="onAccept()" [disabled]="getSelectedCandidatesSameStageFlag() || isLastSatgeCand">
            <mat-icon fontSet="material-icons-outlined">thumb_up</mat-icon> {{'label_jobDetails_Accept' | translate}}
          </button>

          <button mat-button appDisableIfJobClosed 
          [isJobClosed]="IsJobClosed" id="jobDetailsReject" (click)="onReject()"  [disabled]="!isAnyRejectedStageTypeListView || getSelectedCandidatesSameStageFlag()">
            <mat-icon fontSet="material-icons-outlined">thumb_down</mat-icon> {{'label_jobDetails_Reject' | translate}}
          </button>
           <!-- adarsh singh for EWM-14741 on 11-Oct-23  -->
           <button mat-button *ngIf="isSelectedCandOfFirstSatgesOnly" class="share-job-app" id="btnRemoveCand2" [disabled]="!isSelectedCandOfFirstSatgesOnly && selectedCandidates?.length >= 0"
            (click)="onOpenRemoveCandidatePop()">
            <mat-icon fontSet="material-icons-outlined">remove_circle_outline</mat-icon>
            <span class="share-job">
              <span>{{'label_jobDetails_Remove' | translate}}</span>
            </span>
          </button>
           <button *ngIf="!isSelectedCandOfFirstSatgesOnly" mat-button class="share-job-app" id="btnRemoveCand3" [disabled]="selectedCandidates?.length == 0 || selectedCandidates?.length > 1"
            (click)="onOpenRemoveCandidatePop()">
            <mat-icon fontSet="material-icons-outlined">remove_circle_outline</mat-icon>
            <span class="share-job">
              <span>{{'label_jobDetails_Remove' | translate}}</span>
                <span class="new badge red" style="color:red" *ngIf="selectedCandidates?.length > 1 && !isSelectedCandOfFirstSatgesOnly"> {{'label_jobDetailsSelectedCandOnlyParent' | translate}}s</span>
            </span>
          </button>
          <!-- End  -->
          <button mat-button [disabled]="selectedCandidates == null || 0 >= selectedCandidates?.length" id="jobdetailsBuklBtn"
            (click)="onBulkEmail()">
            <mat-icon fontSet="material-icons-outlined">mail</mat-icon> {{'label_JobDetailsendEmail' | translate}}
          </button>
          <!--@When: 04-07-2023 @who:Amit @why: EWM-12927 @what:add class condition & stage phone label-->
          <button mat-button id="addCandidateToJobBtn" class="share-job-app" [disabled]="0 >= selectedCandidates?.length || getBulkSmsFlag() || !SMSCheckStatus" (click)="openJobBulkSMSForCandidate()" [ngClass]="selectedCandidates?.length!=0 && getBulkSmsFlag()? 'same-stage-show' : ''">
            <mat-icon fontSet="material-icons-outlined">sms</mat-icon>
            <span class="share-job">
              <span>{{'label_JobDetailbulksms' | translate}}</span>
              <span class="new badge red" style="color:red" *ngIf="selectedCandidates?.length!=0 && getBulkSmsFlag()">{{'label_stageCanPhoneErr' | translate}}</span>
            </span>
          </button>
          <!-- @When: 13-10-2023 @who:maneesh,@what: fixed drower candidateSummary page-->
          <button mat-button id="jobDetailscandidateSummary" [disabled]="selectedCandidates?.length>1 ||selectedCandidates?.length==0"
            (click)="candidate(true,selectedCandidates[0]?.CandidateId)" cdkOverlayOrigin
            #trigger="cdkOverlayOrigin">
            <mat-icon fontSet="material-icons-outlined">account_box</mat-icon> {{'label_jobDetails_candidateSummary' | translate}}
          </button>
          <button mat-button id="jobDetailsView" (click)="openjobDetailsView()" cdkOverlayOrigin
            #trigger="cdkOverlayOrigin">
            <mat-icon fontSet="material-icons-outlined">preview</mat-icon> {{'jobdetails_View' | translate}}
          </button>

          <!-- @When: 11-10-2023 @who:Nitin Bhati @why:EWM-14748,@what: edit job-->
          <!-- who:maneesh,what:ewm-15484 disabled edit  job when job closed when:05/02/2024 -->
          <button mat-button id="jobDetailsEdit" [disabled]="this.JobDetails?.IsJobClosed==1" (click)="openjobDetailsViewOwner(trigger, 'workflow')" cdkOverlayOrigin
            #trigger="cdkOverlayOrigin">
            <mat-icon fontSet="material-icons-outlined">border_color</mat-icon> {{'quickjob_quickEditJob' | translate}}
          </button>

          <!-- who:maneesh,what:ewm-13861 for disable mapapplication btn when job closed,when:23/09/2023 -->
          <button mat-button id="addCandidateToMapApplicationBtn" (click)="openMapApplicationForm()" cdkOverlayOrigin
            #trigger="cdkOverlayOrigin"  [disabled]="IsJobClosed==1">
            <mat-icon fontSet="material-icons-outlined">read_more</mat-icon> {{'label_mapApplicationForm' | translate}}
          </button>

          <button mat-button id="shareJobApplicationBtn" class="share-job-app" [disabled]="IsApplicationFormAvailable===0 || isExpiredJob"
            (click)="ShareJobApplicationUrl()" cdkOverlayOrigin #trigger="cdkOverlayOrigin">
            <mat-icon fontSet="material-icons-outlined">share</mat-icon>
            <span class="share-job">
              <span>{{'label_sharejobapplicationlink' | translate}}</span>
              <span *ngIf="IsJobClosed==1" class="new badge red" style="color:red">{{'label_Jobisclosed' | translate}}</span>

              <span class="new badge red" style="color:red" *ngIf="isExpiredJob && IsJobClosed==0" > {{'label_job_is_expired' | translate}}</span>
            </span>
          </button>
          <button mat-button id="UpdateApplicantProfile" (click)="ConformationUpdateApplicantProfile()" cdkOverlayOrigin
          #trigger="cdkOverlayOrigin" [disabled]="selectedCandidates?.length == 0">
          <mat-icon fontSet="material-icons-outlined">manage_accounts</mat-icon> {{'label_jobDetails_ApplicantProfileUpdate' | translate}}
        </button>
          <button mat-button id="generateXeopleEmail" [disabled]="xeopleSmartEmailJob || isExpiredJob"
            (click)="onXeopleSmartEmailJob()">
            <mat-icon fontSet="material-icons-outlined">group_work</mat-icon>{{'label_generateXeopleSmartEamil' |
            translate}}
          </button>

          <button mat-button id="generateXeopleTimeline" disabled>
            <mat-icon fontSet="material-icons-outlined">timeline</mat-icon>{{'label_timeline' |
            translate}}
          </button>
          <!-- @When: 13-10-2023 @who:maneesh,@what: fixed proximity btn -->
          <button mat-button [disabled]="selectedCandidates?.length>1 || !selectedClientAndCandidateLatLong"
            id="generateXeopleproximity" (click)="openLatLongPopForCandidate()" matTooltip="{{'label_proximity' |translate}}">
            <mat-icon id="pin-drop-icon" fontSet="material-icons-outlined">pin_drop</mat-icon>
            <span>{{'label_proximity' |translate}}</span>
          </button>

          <!-- @When: 07-09-2023 @who:Amit @why: EWM-13899 @what: add button link-->

          <button mat-button [disabled]="IsJobClosed==1" (click)="onOpenCloseJobModal()" class="close-job-btn close-job-svg" id="close-job-btn">
            <mat-icon svgIcon="job_close"></mat-icon>
            {{'label_close' | translate}} {{'label_job' | translate}}
          </button>

          <button *ngIf="(EOHIntegrationObj?.candExtractEnable == 1) && (IsEOHIntergrated)" class="push-candidate-icon-button logo-with-text" mat-button id="deleteBtn"
          [disabled]="selectedCandidates?.length>1 || selectedCandidates?.length==0"
          (click)="pushCandidateToEOH()" >
            <!-- <svg class="push-candidate-button-icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M320-160v-79h80v-481h-80v-80h80q33 0 56.5 23.5T480-720v480q0 33-23.5 56.5T400-160h-80Zm320 0q-33 0-56.5-23.5T560-240v-480q0-33 23.5-56.5T640-800h200q33 0 56.5 23.5T920-720v480q0 33-23.5 56.5T840-160H640Zm0-79h200v-481H640v481Zm-440-81-57-56 63-64H40v-80h166l-63-63 57-57 160 160-160 160Zm440 81v-481 481Z"/></svg> -->
            <img src="../../../../assets/brand/{{EOHLogo}}" />
            {{'pushCandidateToEoh_pushCandidate' | translate}}
          </button>

          <a *ngIf="!(EOHIntegrationObj?.candExtractEnable == 1) || (!IsEOHIntergrated)" class="push-candidate-icon-button logo-with-text" mat-button
            id="pushEOH_redirectPush1" (click)="redirectOnMarketPlace()">
              <div class="groups">
                  <!-- <svg class="push-candidate-button-icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M320-160v-79h80v-481h-80v-80h80q33 0 56.5 23.5T480-720v480q0 33-23.5 56.5T400-160h-80Zm320 0q-33 0-56.5-23.5T560-240v-480q0-33 23.5-56.5T640-800h200q33 0 56.5 23.5T920-720v480q0 33-23.5 56.5T840-160H640Zm0-79h200v-481H640v481Zm-440-81-57-56 63-64H40v-80h166l-63-63 57-57 160 160-160 160Zm440 81v-481 481Z"/></svg> -->
                  <!-- not connected message  -->
                  <img src="../../../../assets/brand/{{EOHLogo}}" />
                  <div class="list-view-name" *ngIf="!IsEOHIntergrated">
                      <div class="txt">{{'pushCandidateToEoh_pushCandidate' |translate}}</div>
                      <div class="text-label">{{'pushCandidateToEoh_marketplace'|translate}}</div>
                  </div>
                  <!-- connected but not subscribe message -->
                  <div class="list-view-name" *ngIf="IsEOHIntergrated">
                    <div class="txt">{{'pushCandidateToEoh_pushCandidate' |translate}}</div>
                    <div class="text-label">{{'pushCandidateToEoh_marketplace_Subs'|translate}}</div>
                </div>
              </div>
          </a>

          <button *ngIf="(EOHIntegrationObj?.candExtractEnable == 1) && (IsEOHIntergrated)" class="push-candidate-icon-button logo-with-text" mat-button id="shareJObBtn"
          [disabled]="selectedCandidates?.length>1 || selectedCandidates?.length==0"
          (click)="shareJob()">
            <img src="../../../../assets/brand/{{EOHLogo}}" />
            {{'label_ShareJob' | translate}}
          </button>
            <!-- <a *ngIf="!(EOHIntegrationObj?.candExtractEnable == 1) || (!IsEOHIntergrated)" class="push-candidate-icon-button logo-with-text"
              mat-menu-item (click)="redirectOnMarketPlace()" id="pushEOH_redirectPush">
              <div class="groups">
                  <img src="../../../../../assets/brand/{{EOHLogo}}" />
                <div class="list-view-name" *ngIf="!IsEOHIntergrated">
                  <div class="txt">{{'label_ShareJob' |translate}}</div>
                  <div class="text-label">{{'pushCandidateToEoh_marketplace'|translate}}</div>
                </div>
                <div class="list-view-name" *ngIf="IsEOHIntergrated">
                  <div class="txt">{{'label_ShareJob' |translate}}</div>
                  <div class="text-label">{{'pushCandidateToEoh_marketplace_Subs'|translate}}</div>
                </div>
              </div>
            </a> -->
          <div class="data-sync" id="sync-data" matTooltip="Synced to EOH on February 24, 2025 09:06:57 AM with Job ID: CLI000005" 
          matTooltipClass="custom-tooltip">
            <mat-divider></mat-divider>
            <mat-icon svgIcon="tick"></mat-icon>
            <span class="text_sync">{{'label_SyncedTo' | translate}}</span>
            <img class="eoh-logo" src="/assets/brand/{{EOHLogo}}">
            <span class="text-overflow">on February 24, 2025 09:06:57 AM with Job ID: CLI000005</span>
          </div>

        </mat-menu>
      </div>
    </div>
  </div>

  <!-- who:maneesh,what:add label closed job,when:23/09/2023 -->
  <div *ngIf="IsJobClosed==1" class="close-job">{{'label_closed'|translate}}</div>
  <!-- @When: 20-Nov-2023 @who:Satya Prakash Gupta @why: EWM-15148 EWM-15168 @what: close label change -->
  <button [ngClass]="IsJobClosed==1?'close-job-style':''" mat-stroked-button class="header-expand-collapse" (click)="headerExpandCollapse()"
    (mouseenter)="mouseoverAnimation(animationVar?.ExpandArrowButton?.id, animationVar?.ExpandArrowButton?.animation)"
    (mouseleave)="mouseleaveAnimation(animationVar?.ExpandArrowButton?.id, animationVar?.ExpandArrowButton?.animation)">
    <mat-icon *ngIf="headerExpand" id="{{animationVar?.ExpandArrowButton?.id}}"
      class="{{animationVar?.ExpandArrowButton?.isAnimClass}}">
      expand_less
    </mat-icon>
    <mat-icon *ngIf="!headerExpand" id="{{animationVar?.ExpandArrowButton?.id}}"
      class="{{animationVar?.ExpandArrowButton?.isAnimClass}}">
      expand_more
    </mat-icon>
  </button>
</div>
<mat-drawer-container class="job-detail-container p-10 job-summary-container" autosize id="job-details-drawer"
  [ngClass]="headerExpand ? '' : 'container-collapse-layout'">
  <mat-drawer #activityAdd class="activitydrawer" position="end" mode="over" disableClose="true">
    <div class="activitydrawer-innercontainer">
      <div class="activitydrawer-innercontainer-drawerTitleSec" *ngIf="!action">
        <h4 class="text-overflow">
          {{(formHeading=='Add'?'label_addNewActivity':'label_editNewActivity')|translate}}
          <button class="closeDrawerIcon" id="AddEditId" mat-stroked-button
            (click)="activityAdd.toggle(); closeActivity()">
            <mat-icon>close</mat-icon>
          </button>
        </h4>
      </div>

      <div class="activitydrawer-innercontainer-drawerTitleSec" *ngIf="action">
        <h4 class="text-overflow">
          {{'label_viewActivity'|translate}}
          <button class="closeDrawerIcon" id="AddEditId" mat-stroked-button
            (click)="activityAdd.toggle();">
            <mat-icon>arrow_forward_ios</mat-icon>
          </button>
        </h4>
      </div>


      <mat-card id="add-new-activity" class="activitydrawer-innercontainer-mat-card" *ngIf="activityStatus">
        <app-add-job-activity [Names]="Names" [Employee]="categoryForCand" [JobId]="JobId" [GridId]="GridId"
          [category]="categoryForCand" [candidateIdData]="candidateId" [emailConnection]="emailConnection"
          (clientActivityCount)="fetchEmployeeActivityCount($event)" [Email]="selectedCanEmail"
          (closeDrawer)="closeDrawer($event)"></app-add-job-activity>
      </mat-card>

    </div>
  </mat-drawer>
  <mat-card class="jobdetail-card jobDetailsMatDrawerEnd p-0 mb-0 summary-page" (scroll)="divScroll($event)"
    [ngClass]="scrolledValue==true?'avc':''">
    <mat-card-content class="jobDetailsPage summary-layout bottom-0">
      <!-- @Who: Bantee Kumar,@Why:EWM-10728,@When: 1-Mar-2023,@What:When user Share Notes, Recent Activity, Documents via Protected mode and Internal share, it should redirects user to that particular Note, Recent Activity and Documents -->
      <mat-tab-group class="jobdetail-tab" (selectedTabChange)="tabClick($event)" [selectedIndex]='selectedTabIndex'
        dir="{{positionMatTab}}">
        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon">people_alt</mat-icon>
            <!-- who:maneesh,what:ewm-18/09/2023,what:ewm-11774 for change label -->
            {{'label_Applications' | translate}}<span class="numbers">{{candidateMappedJobCount}}</span>
          </ng-template>
          <app-job-action *ngIf="jobActionStatus" (backtoJobDetails)="backtoJobDetails($event)"
            [candidateIdData]="candidateIdData" [JobName]="JobName" [GridId]="GridId" [workflowId]="workflowId"
            [jobId]="jobId" [JobLatitude]="JobLatitude" [JobLongitude]="JobLongitude" [jobLocation]="jobLocation"
            [EmailId]="EmailId" [WorkFlowStageId]="WorkFlowStageId" [CandidateName]="CandidateName"
            [WorkFlowStageName]="WorkFlowStageName" [LastActivity]="LastActivity"
            [WorkFlowName]="WorkFlowName"></app-job-action>
          <mat-drawer-container *ngIf="!jobActionStatus" class="quickFiltr-container" autosize  (backdropClick)="cancelTreeview()">
            <!-- who:maneesh,what:ewm-13861 for disabled when job closed,when:22/09/2023 -->
            <!-- <div *ngIf="IsJobClosed==1" class="logo-loader logo-loader-candidate">
            </div> -->
            <!--Start multilayer workflow EWM-7488 EWM-9044  -->
            <mat-drawer #multilayerWorkflow [opened]="treeMatDrawer" [mode]="mobileQuery.matches ? 'over' : 'over'"
              position="start" class="multilayer-workflow" id="multilayer-workflow">
              <h4>{{'label_multilayerWorkflow' | translate}}
                <button mat-icon-button color="primary" (click)="cancelTreeview()">
                  <mat-icon>close</mat-icon>
                </button>
              </h4>
              <mat-divider></mat-divider>
              <div class="progress-loader-box" *ngIf="loadingTree">
                <div class="progress-loader">
                  <div class="loaderBar"></div>
                </div>
              </div>
              <div class="tree-view-box">
                <mat-tree *ngIf="view" [dataSource]="dataSource" [treeControl]="treeControl" class="multilayer-tree">
                  <!-- This is the tree node template for leaf nodes -->
                  <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle class="node-child-and-subchild">
                    <div class="multilayer-tree-node">
                      <!-- use a disabled button to provide padding for tree leaf -->
                      <button mat-icon-button disabled></button>
                      <div class="multilayer-tree-node-name child-and-subchild"
                        [style.background-color]="node.ColorCode">{{node.StageName}}
                        <mat-icon (click)="ShowStageDetails(node)"
                          *ngIf="node.StageVisibility==0" class="cursor">visibility_off</mat-icon>
                        <span class="badge animate__animated cursor" matTooltip="{{node.Count}}"  *ngIf="viewMode=='listMode'" (click)="filterStageWiseData(node)"
                          matTooltipClass="custom-tooltip">{{node.Count}}</span>
                          <span class="badge animate__animated cursor" matTooltip="{{node.Count}}"  *ngIf="viewMode=='cardMode'"
                          matTooltipClass="custom-tooltip">{{node.Count}}</span>
                      </div>
                    </div>
                  </mat-tree-node>
                  <!-- This is the tree node template for expandable nodes -->
                  <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild" class="node-parent">
                    <div class="multilayer-tree-node first-child">
                      <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'toggle ' + node.StageName">
                        <mat-icon class="mat-icon-rtl-mirror">
                          {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                        </mat-icon>
                      </button>
                      <div class="multilayer-tree-node-name parent" [style.background-color]="node.ColorCode">
                        {{node.StageName}}
                        <mat-icon (click)="ShowStageDetails(node)"
                          *ngIf="node.StageVisibility==0" class="cursor">visibility_off</mat-icon>
                        <span class="badge animate__animated cursor" matTooltip="{{node.Count}}"  *ngIf="viewMode=='listMode'" (click)="filterStageWiseData(node)"
                          matTooltipClass="custom-tooltip">{{node.Count}}</span>
                          <span class="badge animate__animated cursor" matTooltip="{{node.Count}}"  *ngIf="viewMode=='cardMode'"
                          matTooltipClass="custom-tooltip">{{node.Count}}</span>
                      </div>
                    </div>
                    <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)" class="sub-child">
                      <ng-container matTreeNodeOutlet></ng-container>
                    </ul>
                  </mat-nested-tree-node>
                </mat-tree>
              </div>
            </mat-drawer>
            <!--End multilayer workflow  EWM-7488 EWM-9044 -->
            <!-- sms history form -->
            <mat-drawer #smsHistoryDrawer mode="over" *ngIf="smsHistoryToggel" disableClose="true" position="end"
              class="sms-history-drawer">
              <div class="closePanel">
                <button class="closeDrawerIcon" id="closeDrwerMaped" mat-stroked-button
                  (click)="toggleDrwer(smsHistoryDrawer);openDrawerWithBg(false)">
                  <mat-icon>arrow_forward_ios</mat-icon>
                </button>
                <button class="sidebarSectionName addCandidateToJobBtn" mat-raised-button color="primary" type="button"
                  id="btnAssignCandidate">{{'label_sms_history'|translate }}</button>
              </div>
              <div class="panelSidebarInformation">
                <mat-card *ngIf="isSmsHistoryForm" class="drawer-mat-card">
                  <app-sms-history [JobId]="JobId" [JobName]="JobName" [WorkflowId]="WorkflowId"
                    [SMSHistory]="SMSHistory" [candidateIdData]="candidateIdData" [candidateDetails]="candidateDetails"
                    [WorkflowName]="WorkflowName" [UserType]="userType"  [ConTactPhoneNumber]="contactPhone"
                    (onSmsHistoryForm)="fetchDataFromSMSHistory($event)"></app-sms-history>
                </mat-card>
              </div>
            </mat-drawer>
            <!--sms history form -->

            <!--mat drawer start--->
      <mat-drawer #LandingEnddrawer position="end"
      [mode]="sideMenuContext === 'applicant-section' ? 'over' :  mobileQuery.matches ? 'over' : 'side'"
      id="applicant-drawer" [ngClass]="sideMenuContext === 'applicant-section'?'applicant-drawer jobdetail-applicant-drawer':'quickFiltr-mat-drawer'" disableClose="true">
      <ng-container *ngIf="sideMenuContext === 'applicant-section'">
        <div class="applicant-list-header" id="applicant-list-header">
          <h4>{{'label_ApplicantList'|translate}}  <span class="title-count" [style.background-color]="workflowStageList?.ColorCode">{{workflowStageList?.StageName}} ({{workflowStageList?.Count}})</span></h4>
          <button id="close-quick-candidate-list" type="button" mat-icon-button
          class="quick-button" (click)="LandingEnddrawer.toggle();closeDrawerApplicantList();qucikFilterClose();sideMenuContext = 'applicant-section'"
            matTooltipPosition="left">
            <mat-icon  fontSet="material-icons-outlined">close</mat-icon>
          </button>
        </div>
        <mat-divider></mat-divider>
        <div class="applicant-list-grid">
          <app-applicant-list *ngIf="candidateIconStatus" [workflowId]="workflowId" [WorkflowStageId]="WorkflowStageId" [filterConfig]="filterConfig" [CountFilter]="'TotalJobs'" [QuickFilter]="CountFilter" [JobId]="JobId" [JobDetailApplicantlist]="true" [pipeline]="true"></app-applicant-list>
        </div>
      </ng-container>
      <ng-container *ngIf="sideMenuContext === 'quickfilter-section'">
        <h4>{{'label_quickFilter' | translate}}</h4>
        <button mat-icon-button color="warn" (click)="LandingEnddrawer.toggle();qucikFilterClose()" *ngIf="mobileQuery.matches ? true : false">
          <mat-icon>close</mat-icon>
        </button>
              <mat-divider></mat-divider>
              <div class="quick-filter">
                <!-- Entire Software : Satya Prakash Gupta : 03-Jul-2023 : Remove Quik filter button according to requerment : EWM-12861 EWM-12897 -->
                <button mat-stroked-button id="MoreThanOneJob" [ngClass]="isActive==='MoreThanOneJob'?'active':''" [disabled]="moreThanOneJobCount == 0" (click)="filterValue('MoreThanOneJob')">More than one Job ({{moreThanOneJobCount}})</button>
                <!-- who:maneesh,what:ewm-12889 for show interviewinaweek count and candidate list filter interviewinaweek ,when:03/07/2023 -->
                <!-- <button mat-stroked-button [ngClass]="isActive==='InterviewInaWeek'?'active':''" (click)="filterValue('InterviewInaWeek')" [disabled]="interviewinaweek==0">{{'label_interviewinaweek' | translate}} ({{interviewinaweek}})</button> -->
                <button mat-stroked-button [ngClass]="isActive==='Inbox'?'active':''" [disabled]="inboxCount === 0" (click)="filterValue('Inbox')">Inbox ({{inboxCount}})</button>
                <!-- who:bantee,what:ewm-14008 On job summary list view page, under quick filter, “Show All Stages filter” is displaying ,when:14/09/2023 -->
                <button mat-stroked-button [ngClass]="HideStageIds?.length>0 && viewMode!='listMode'?'active':''" [disabled]="HideStageIds?.length==0 || viewMode=='listMode'"
                  (click)="showAllStages();">Show all stages({{HideStageIds?.length}})</button>
              </div>
      </ng-container>
      </mat-drawer>
      <!--mat drawer end--->
            <div class="quickFiltr-sidenav-content">
              <!---------@When: 26-07-2023 @who:Amit @why: EWM-13566 @what: tooltip change--------->
              <!-- @When: 20-Nov-2023 @who:Satya Prakash Gupta @why: EWM-15148 EWM-15168 @what: close label change -->
            <button  appDisableIfJobClosed 
            [isJobClosed]="IsJobClosed"  [ngClass]="IsJobClosed==1?'close-job-style':''" id="close-quick-filters" *ngIf="drawerIconStatus" type="button" mat-stroked-button class="quick-filter-button" (click)="LandingEnddrawer.toggle();qucikFilterClose()"
            (mouseenter)="mouseoverAnimation(animationVar?.SidebarFilterButton?.id, animationVar?.SidebarFilterButton?.animation)"
            (mouseleave)="mouseleaveAnimation(animationVar?.SidebarFilterButton?.id, animationVar?.SidebarFilterButton?.animation)"
            matTooltip="{{'label_JobDetails_closeQuickFilters'|translate}}" matTooltipPosition="left">
            <mat-icon id="{{animationVar?.SidebarFilterButton?.id}}"
              class="{{animationVar?.SidebarFilterButton?.isAnimClass}}" fontSet="material-icons-outlined">filter_alt</mat-icon>
          </button>
            <button  appDisableIfJobClosed 
            [isJobClosed]="IsJobClosed"  [ngClass]="IsJobClosed==1?'close-job-style':''" id="open-quick-filters" *ngIf="!drawerIconStatus" type="button" mat-stroked-button class="quick-filter-button" (click)="LandingEnddrawer.toggle();rightToggel()"
              (mouseenter)="mouseoverAnimation(animationVar?.FilterPopupButton?.id, animationVar?.FilterPopupButton?.animation)"
              (mouseleave)="mouseleaveAnimation(animationVar?.FilterPopupButton?.id, animationVar?.FilterPopupButton?.animation)"
              matTooltip="{{'label_JobDetails_openQuickFilters'|translate}}" matTooltipPosition="left">
              <mat-icon id="{{animationVar?.FilterPopupButton?.id}}"
                class="{{animationVar?.FilterPopupButton?.isAnimClass}}" fontSet="material-icons-outlined">filter_alt</mat-icon>
            </button>
           <div class="stagecarousel workflow-stages" id="stagecarousel">
                <div class="progress-loader-box" *ngIf="loadingStage">
                  <div class="progress-loader">
                    <div class="loaderBar"></div>
                  </div>
                </div>
                <div class="no-stages" *ngIf="stagesList?.length==0 || stagesList==null || stagesList==undefined">
                  {{'label_noStageFound' | translate}}
                </div>
                <!---------- -->
                <swiper [slidesPerView]="screnSizePerStage" [spaceBetween]="0" [navigation]="true"
                  (swiper)="onSwiper($event)" [ngClass]="screenPreviewClass" *ngIf="stagesList?.length>0">
                  <ng-template class="carousel-cell" *ngFor="let stage of stagesList" swiperSlide>
                    <div class="flowStage" [style.background-color]="stage.ColorCode?stage.ColorCode:stageColor"
                    [ngClass]="{'stagefilter-selected': SelectedStageId==stage.InternalCode}" >
                      <span  appDisableIfJobClosed 
                      [isJobClosed]="IsJobClosed"  (click)="openJobWorkflowSubStages(stage.InternalCode)" id="Stage-Name" class="flowStageTxt text-overflow" matTooltip="{{stage.StageName}}"
                        matTooltipClass="custom-tooltip">
                        {{stage.StageName}}
                      </span>
                      <span class="arrow-left"
                        [style.border-left-color]="stage.ColorCode?stage.ColorCode:stageColor"></span>
                    </div>
                    <!-- who:maneesh,what:ewm-13008,what:fixed redirect when click on stage name in card view and click on count then open left pannel,when:06/07/2023 -->
                    <!------------@suika @EWM-12465 @WHN 01-06-2023--------------------------->
                    <a appDisableIfJobClosed 
                    [isJobClosed]="IsJobClosed" (click)="candidateToggel(stage)" id="stagecount"><span class="badge animate__animated cursor" *ngIf="viewMode=='cardMode'">
                        {{stage.Count}}
                      </span>
                    </a>
                    <span appDisableIfJobClosed 
                    [isJobClosed]="IsJobClosed"  class="badge animate__animated cursor" *ngIf="viewMode=='listMode'" id="stagecounttwo"
                      [ngClass]="{'stagefilter-selected': SelectedStageId==stage.InternalCode}"
                      (click)="filterStageWiseData(stage)">
                      {{stage.Count}}
                    </span>
                    <span class="selectd-arrow" *ngIf="SelectedStageId==stage.InternalCode"></span>
                  </ng-template>
                </swiper>
              </div>
              <div class="candidate-data-header">
                <div class="filter-refresh">
                  <!-- Entire Software : Amit Rajput : 10-May-2022 : Tooltip Add : EWM-5987 -->
                  <button  appDisableIfJobClosed 
                  [isJobClosed]="IsJobClosed"  mat-raised-button color="primary" matTooltip="{{'label_refreshBtn'|translate}}"
                    matTooltipClass="custom-tooltip" id="btnRefresh" (click)="refresh()"
                    (mouseenter)="mouseoverAnimation(animationVar?.RotateButton?.id, animationVar?.RotateButton?.animation)"
                    (mouseleave)="mouseleaveAnimation(animationVar?.RotateButton?.id, animationVar?.RotateButton?.animation)">
                    <mat-icon id="{{animationVar?.RotateButton?.id}}"
                      class="{{animationVar?.RotateButton?.isAnimClass}}">rotate_right</mat-icon>
                  </button>
                  <button  appDisableIfJobClosed 
                  [isJobClosed]="IsJobClosed"  mat-raised-button color="primary"
                    matTooltip="{{'label_View' | translate}} {{'label_Workflow' | translate}}"
                    matTooltipClass="custom-tooltip" id="redirectToJobWorkflow" (click)="viewWorkflowStages()"
                    (mouseenter)="mouseoverAnimation(animationVar?.AccountTreeButton?.id, animationVar?.AccountTreeButton?.animation)"
                    (mouseleave)="mouseleaveAnimation(animationVar?.AccountTreeButton?.id, animationVar?.AccountTreeButton?.animation)">
                    <mat-icon id="{{animationVar?.AccountTreeButton?.id}}"
                      class="{{animationVar?.AccountTreeButton?.isAnimClass}}">account_tree</mat-icon>
                  </button>
                  <button  appDisableIfJobClosed 
                  [isJobClosed]="IsJobClosed"  mat-raised-button color="primary" id="open-dynamic-filter-area"
                    (click)="openDynamicFilterArea()" matTooltip="{{'label_dynamicFilter'|translate}}"
                    matTooltipClass="custom-tooltip"
                    (mouseenter)="mouseoverAnimation(animationVar?.DynamicFilterButton?.id, animationVar?.DynamicFilterButton?.animation)"
                    (mouseleave)="mouseleaveAnimation(animationVar?.DynamicFilterButton?.id, animationVar?.DynamicFilterButton?.animation)">
                    <mat-icon id="{{animationVar?.DynamicFilterButton?.id}}"
                      class="{{animationVar?.DynamicFilterButton?.isAnimClass}}">filter_list</mat-icon>
                  </button>
                  <div
                    class="dynamic-filter-area mat-elevation-z3 animate__animated animate__headShake animate__repeat-3"
                    id="dynamic-filter-area" *ngIf="dynamicFilterArea">
                    <mat-icon class="arrow_left">arrow_left</mat-icon>
                    <div class="dynamic-filter-txt">
                      <mat-icon class="info" fontSet="material-icons-outlined">info</mat-icon>
                      <i>{{'label_hey'|translate}} {{currentUser}},</i>
                      <button mat-icon-button (click)="closeDynamicFilterArea()" id="close-dynamic-filter-area">
                        <mat-icon>close</mat-icon>
                      </button>
                    </div>
                    <mat-divider></mat-divider>
                    <p>
                      {{'label_filterMessage'| translate}}
                    </p>
                    <mat-divider></mat-divider>
                    <div class="dynamic-filter-area-footer">
                      <mat-checkbox color="primary" [checked]="filterAlert" (change)="setShowAlert($event)">
                        {{'label_doNotShowAgain' | translate}}</mat-checkbox>
                    </div>
                  </div>
                </div>
                <div class="search-viewicon">
                  <mat-form-field  appDisableIfJobClosed 
                  [isJobClosed]="IsJobClosed"  class="searchInput" floatLabel="never"> 
                    <mat-label>{{'label_search'|translate}}</mat-label>
                    <input matInput id="btnSearch" tabindex (input)="onFilter($event.target.value)"
                      placeholder="{{''|translate}}" [(ngModel)]="searchValue" [ngModelOptions]="{standalone: true}">
                    <mat-icon matPrefix style="position: relative; top: 7px;">search</mat-icon>
                    <button *ngIf="searchValue" id="clearBtn" matSuffix mat-icon-button aria-label="Clear"
                      (click)="onFilterClear()" (click)="searchValue=''">
                      <mat-icon>close</mat-icon>
                    </button>
                    <div *ngIf="loadingSearch" class="k-i-loading inputSearch"></div>
                  </mat-form-field>
                  <div class="button-with-clear">
                    <button  appDisableIfJobClosed 
                    [isJobClosed]="IsJobClosed"  mat-raised-button id="more-filter_Btn" class="more-filter"
                      [ngClass]="[ filterCount!=0 ? 'addFilter' : 'blankFilter']" (click)="openFilterModalDialog()"
                      matTooltip="{{'label_filters'|translate}}" matTooltipClass="card-list-tooltip"
                      matTooltipPosition="before"
                      (mouseenter)="mouseoverAnimation(animationVar?.FilterButton?.id, animationVar?.FilterButton?.animation)"
                      (mouseleave)="mouseleaveAnimation(animationVar?.FilterButton?.id, animationVar?.FilterButton?.animation)">
                      <mat-icon fontSet="material-icons-outlined" fontSet="material-icons-outlined" id="{{animationVar?.FilterButton?.id}}" class="{{animationVar?.FilterButton?.isAnimClass}}">filter_alt</mat-icon>
                    </button>
                    <div id="clear_filter_btn" class="clear-with-data" *ngIf="filterCount!=0"
                      (click)="clearFilterData(viewMode)">
                      <span class="text-overflow filterCount">{{filterCount}}</span>
                      <button mat-icon-button color="warn">
                        <mat-icon>close</mat-icon>
                      </button>
                    </div>
                  </div>
                  <button  appDisableIfJobClosed 
                  [isJobClosed]="IsJobClosed"  mat-raised-button [disabled]= "viewMode === 'cardMode'?true:false"class="header-button" (click)="openActionModalDialog()" id="actionColumn"
                    matTooltip="{{'label_Actions'|translate}}" matTooltipClass="card-list-tooltip"
                    matTooltipPosition="before"
                    (mouseenter)="mouseoverAnimation(animationVar?.ActionsButton?.id, animationVar?.ActionsButton?.animation)"
                    (mouseleave)="mouseleaveAnimation(animationVar?.ActionsButton?.id, animationVar?.ActionsButton?.animation)">
                    <mat-icon fontSet="material-icons-outlined" id="{{animationVar?.ActionsButton?.id}}"
                      class="{{animationVar?.ActionsButton?.isAnimClass}}">
                      {{animationVar?.ActionsButton?.iconName}}
                    </mat-icon>
                  </button>
                  <button  mat-raised-button [ngClass]="[ viewMode === 'cardMode' ? '' : 'active-list-grid',IsJobClosed==1?'close-job-style':'']"
                    class="list-grid-button" (click)="switchListMode('listMode')" id="job-landing-viewModeInactive"
                    matTooltip="{{'label_listView'|translate}}" matTooltipClass="card-list-tooltip"
                    matTooltipPosition="before"
                    (mouseenter)="mouseoverAnimation(animationVar?.ListButton?.id, animationVar?.ListButton?.animation)"
                    (mouseleave)="mouseleaveAnimation(animationVar?.ListButton?.id, animationVar?.ListButton?.animation)">
                    <mat-icon id="{{animationVar?.ListButton?.id}}" class="{{animationVar?.ListButton?.isAnimClass}}">
                      format_list_bulleted
                    </mat-icon>
                  </button>
                  <button mat-raised-button [ngClass]="[ viewMode === 'cardMode' ? 'active-list-grid' : '',IsJobClosed==1?'close-job-style':'']"
                    class="list-grid-button" (click)="switchListMode('cardMode')" id="job-landing-viewModeactive"
                    matTooltip="{{'label_gridViews'|translate}}" matTooltipClass="card-list-tooltip"
                    matTooltipPosition="before"
                    (mouseenter)="mouseoverAnimation(animationVar?.GridButton?.id, animationVar?.GridButton?.animation)"
                    (mouseleave)="mouseleaveAnimation(animationVar?.GridButton?.id, animationVar?.GridButton?.animation)">
                    <mat-icon id="{{animationVar?.GridButton?.id}}" class="{{animationVar?.GridButton?.isAnimClass}}">
                      view_module
                    </mat-icon>
                  </button>
                </div>
              </div>
              <!--@When: 12-09-2023 @who:Amit @why: EWM-13874 @what: add id-->
              <div class="kanban-sec-main job-details-kanban" id="kanban-sec-main" *ngIf="viewMode == 'cardMode'">
                <div class="kanban-sec" [ngClass]="[ viewMode === 'listMode' ? 'hide' : '']" id="kanban-sec">
                  <div *ngIf="loading || loader" class="logo-loader" id="logo-loader">
                    <div class="logo-loading"></div>
                  </div>
                  <div class="kanban-header-sticky">
                    <div class="kanban-header">
                      <!-------------@suika @whn 24-05-2023 @EWM-12465------*ngIf="stageData.StageVisibility==1"----[checked]="stageData.CheckboxStatus"--------------name="stageCheckId_{{stageData.StageName}}"-class="white-checked"--->
                      <!--<ng-containner>-->
                      <div class="stageName cursor" [style.background-color]="stageData.ColorCode"
                        [ngStyle]="{'display': stageData.StageVisibility==0 ? 'none' : (stageData.StageVisibility==1  ? '' : null) }"
                        id="stageid_{{stageData.StageDisplaySeq}}"
                        [ngClass]="stageData.isDisabled==0 ?'dragenable':'dragdisable'" *ngFor="let stageData of stages;"
                        >
                        <div class="card-view-header">
                          <mat-checkbox   appDisableIfJobClosed 
                          [isJobClosed]="IsJobClosed"  [disabled]="stageData?.candidates?.length==0" [checked]="stageData.CheckboxStatus"
                            class="white-checked" color="primary"  id="stageCheckId_{{stageData.StageName}}"
                            name="stageCheckId_{{stageData.StageName}}" tabindex [indeterminate]="stageData.IsIntermediate"
                            (change)="selectStageData(stageData,$event)"></mat-checkbox>
                            <!--------------------@suika @whn 10-07-2023 as per satya discussion remove click event-->
                            <div class="el text-overflow" (click)="onOpenJobActionStageName(stageData)">{{stageData.StageName}}</div>
                            <!----------@suika @WHN-20-06-2023  @EWM-12888 as per story modification-----------------------
                          <div class="el text-overflow" style="padding: 10px;" *ngIf="getSelectedCandidatesSameStageFlag()">{{stageData.StageName}}</div>
                          <div class="el text-overflow" style="padding: 10px;" (click)="openActionView()" *ngIf="!getSelectedCandidatesSameStageFlag()">{{stageData.StageName}}</div>
                        -------------------------->
                          <div class="btn-group-header">
    <!--  who:maneesh,what:ewm-13013 for refress click then stages patch and count pass true in (click)="HideStageDetails(stageData,true)",when:07/07/2023 -->
                            <button  appDisableIfJobClosed 
                            [isJobClosed]="IsJobClosed"  mat-icon-button color="primary" id="candidate-btn-add-tag"
                              (click)="HideStageDetails(stageData)" *ngIf="stageData.StageVisibilityRestriction!=1">
                              <mat-icon fontSet="material-icons-outlined">visibility</mat-icon>
                            </button>
                            <div class="number-counter text-overflow">{{stageData.candidatesCount}}</div>
                          </div>
                        </div>
                      </div>
                      <!---</ng-containner>-->
                    </div>
                  </div>
                  <div cdkDropListGroup class="kanban">
                    <!-------------@suika @whn 24-05-2023 @EWM-12465------------------------->
                    <ng-container *ngFor="let stageData of stages;let j=index">
                      <div class="kanban-step"
                        id="stageid_{{stageData.StageDisplaySeq}}" *ngIf="stageData.StageVisibility==1">
                        <div  class="process-box" cdkDropList [cdkDropListData]="stageData.candidates"
                        (cdkDropListDropped)="drop($event,stageData.StageName,stageData.InternalCode,stageData.StageDisplaySeq,j,stageData.candidates,stageData.StageType)">
                          <div class="stageName" [style.background-color]="stageData.ColorCode">
                            <div class="el text-overflow">{{stageData.StageName}}</div>
                            <div class="number-counter text-overflow"> {{stageData.candidatesCount}}</div>
                          </div>
                          <div class="on-demand-loader" *ngIf="stages==undefined || stages?.length == 0 && stageData?.candidates?.length != 0">
                            <span data-text="Loading...">Loading...</span>
                          </div>
                          <div class="nodata" *ngIf="stageData?.candidates==undefined || stageData?.candidates?.length == 0">
                            <span>{{loadingData |translate}}</span>
                          </div>
                          <div class="on-demand-loader" *ngIf="stageData.InternalCode == scrolledStage">
                            <span data-text="Loading...">Loading...</span>
                          </div>
                          <!--@When: 07-09-2023 @who:Amit @why: EWM-13874 @what: add id-->
                          <cdk-virtual-scroll-viewport *ngIf="stageData?.candidates?.length > 0" #viewport id="viewport{{j}}" itemSize="50" class="viewport" minBufferPx="50" maxBufferPx="50"  (scrolledIndexChange)="scrolled($event,stageData.InternalCode,j)">
                          <div class="candidate-list" id="candidate-list"  appDisableIfJobClosed [isJobClosed]="IsJobClosed"  >
                            <!-- @Who: Satya Prakash Gupta ,@Why:EWM-12465 EWM-12512,@When: 24-May-2023,@What:add accordion in job sunmmary card view and move all design in accordion -->
                            <!---------@When: 16-09-2023 @who:Amit @why: EWM-14372 @what: new card start here--------->
                            <mat-card class="candidate-card-box" class="candidateInfoPanel_{{can?.CandidateId}}" [ngClass]="{'selected': can?.CheckboxStatus !=0, 'unread':  can?.IsProfileRead === 0}"  (cdkDragStarted)="dragStart($event,stageData.StageDisplaySeq,can)"
                              *cdkVirtualFor="let can of stageData?.candidates | orderByFun; let i = index" cdkDrag
                              (cdkDragMoved)="onDragMoved($event)"  id="stageid_{{stageData.StageDisplaySeq}}_jobcandidate-card_{{i}}">
                              <div class="job-card-placeholder" *cdkDragPlaceholder></div>
                              <mat-card class="job-card-preview" *cdkDragPreview [cdkDragData]="can">

                                <div class="candidate-box-top" id="candidate-box-top">
                                  <div class="candidate-box-avtaardetails" id="candidate-box-avtaardetails">
                                    <div class="candidate-box-avtaar" id="candidate-box-avtaar">
                                      <mat-checkbox appDisableIfJobClosed [isJobClosed]="IsJobClosed" [checked]="can.CheckboxStatus" color="primary" id="stageCheckId_{{stageData.StageName}}_{{i}}"
                                            name="stageCheckId_{{stageData.StageName}}_{{i}}" tabindex
                                            (change)="selectStageCanData(stageData,can,$event,j)">ff
                                      </mat-checkbox>

                                      <!-- adarsh singh for EWM-14514 open profile modal on 28-Sep-23 --><!-- Satya Prakash Gupta for EWM-14691 EWM-14724 open profile on 13-Oct-23 -->
                                      <div  appDisableIfJobClosed 
                                      [isJobClosed]="IsJobClosed"  class="userAvtaarAndName" id="userImage_{{can?.CandidateId}}" style="cursor: pointer;" *ngIf="can.PreviewUrl !='' "
                                      (mouseenter)="openProfile(i, true)" (mouseleave)="closeProfile(i, false)" cdkOverlayOrigin #trigger="cdkOverlayOrigin">
                                        <img src="{{can.PreviewUrl}}" *ngIf="can.PreviewUrl !='' " alt="user" />
                                        <ng-template
                                          cdkConnectedOverlay
                                          [cdkConnectedOverlayOrigin]="trigger"
                                          [cdkConnectedOverlayOpen]="profilePicStatus" *ngIf="isOpen==i">
                                          <img class="hover-image" src="{{can.PreviewUrl}}" alt="user" />
                                        </ng-template>
                                        
                                      </div>

                                      <div appDisableIfJobClosed 
                                      [isJobClosed]="IsJobClosed"  class="userAvtaarAndName"  *ngIf="can.PreviewUrl =='' ">
                                        <!-- <span [style.background]="getBackgroundColor(can?.ShortName)">{{can?.ShortName}}</span> -->
                                        <span [style.background]="can?.StatusColorCode">{{can?.ShortName}}</span>
                                      </div>


                                      <div class="diamond-screen" id="diamond-screen">
                                        <div  appDisableIfJobClosed 
                                        [isJobClosed]="IsJobClosed"  class="screen-card-main">
                                        <p matTooltipClass="custom-tooltip" matTooltip="{{can.CandidateName}}">
                                        <span (click)="openSingleCanActionView(can)" class="text-overflow">
                                        
                                          {{can.CandidateName}}</span>
 
                                        </p>
                                        <div class="screen-card" id="screen-card">
                                          <span (click)="openMoveBoxModal(can)" matTooltipClass="custom-tooltip" class="text-overflow" matTooltip="{{can.WorkFlowStageName}}">{{can.WorkFlowStageName?can.WorkFlowStageName:'--'}}</span>
                                        </div>
                                      </div>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="candidate-box-icons" id="candidate-box-icons">
                                    <div class="pin-unpin" id="pin-unpin">
                                      <button *ngIf="can?.IsPin === 0" mat-icon-button class="pin-btn" tabindex id="pinBtn{{j}}"
                                      matTooltipClass="custom-tooltip" matTooltip="{{'label_jobDetails_Pin' | translate}}">
                                          <mat-icon fontSet="material-icons-outlined" id="pin-icon" (click)="markPinUnPin(can,stageData?.candidates,j)"
                                          >push_pin</mat-icon>
                                      </button>
                                      <button *ngIf="can?.IsPin === 1" mat-icon-button class="pin-btn pin-active" tabindex id="unPinBtn"
                                      matTooltipClass="custom-tooltip" matTooltip="{{'label_jobDetails_UnPin' | translate}}"
                                      (click)="markPinUnPin(can,stageData?.candidates,j)">
                                          <div class="two-icons" id="two-icons-unpin">
                                          <mat-icon class="first-icon" id="first-icon-unpin" fontSet="material-icons-outlined">push_pin</mat-icon>
                                          <mat-icon class="secondIcon" id="second-icon-unpin" fontSet="material-icons-outlined">horizontal_rule</mat-icon>
                                        </div>
                                      </button>
                                    </div>
                                    <div class="date" id="date-activity">
                                      <span>{{can.LastActivity | utctodate:timezonName:timezonName:userpreferences.timeformate }}</span>
                                    </div>
                                  </div>
                                </div>

                                <div class="source-details" id="source-details">
                                  <div class="source-data">
                                     <!--****other view source***-->
                                     <ng-container *ngIf="can?.AppliedSourceChild === null || can?.AppliedSourceChild ===''; else sourceChildExists">
                                      <div class="source-form" id="source-form">
                                      <span class="text-bold" matTooltipClass="custom-tooltip"   matTooltip="{{'jobdetails_applied' | translate}} {{'label_Source' | translate}} : {{can.AppliedSource}}">
                                        {{can.AppliedSource}}
                                      </span>
                                      <mat-icon matTooltipClass="custom-tooltip" matTooltip="{{can.LastActivity | date:userpreferences.timeformate:userpreferences.timezone}}">
                                        error_outline
                                      </mat-icon>
                                      </div>
                                    </ng-container>
                                    
                                    <ng-template #sourceChildExists>
                                      <div class="source-form" id="source-form">
                                      <span class="text-bold" matTooltipClass="custom-tooltip"   matTooltip="{{'label_Source' | translate}} : {{can.AppliedSource}}">
                                        {{can.AppliedSource}}
                                      </span>
                                      <mat-icon matTooltipClass="custom-tooltip"  matTooltip="{{can.LastActivity | date:userpreferences.timeformate:userpreferences.timezone}}">
                                        error_outline
                                      </mat-icon>
                                      </div>
                                      <div class="source-form" id="source-form">
                                      <span class="text-bold" matTooltipClass="custom-tooltip" 
                                            matTooltip="{{'jobdetails_applied' | translate}} {{'label_Source' | translate}} : {{can.AppliedSourceChild}}">
                                        {{can.AppliedSourceChild}}
                                      </span>
                                      <mat-icon matTooltipClass="custom-tooltip"   matTooltip="{{can.LastActivity | date:userpreferences.timeformate:userpreferences.timezone}}">
                                        error_outline
                                      </mat-icon>
                                      </div>
                                    </ng-template>
                                    <!-- <div class="source-form" id="source-form-apply" *ngIf="can?.AppliedSourceChild  == true">
                                      <span class="text-bold cursorLink" (click)="OpenApplicationFormPopUp(can)" matTooltipClass="custom-tooltip" matTooltip="{{'jobdetails_applied'|translate}} {{'label_Source'|translate}} : {{can.AppliedSourceChild }}">{{can.AppliedSourceChild }}</span>
                                      <mat-icon matTooltipClass="custom-tooltip" matTooltip="{{can.LastActivity | date:userpreferences.timeformate:userpreferences.timezone}}">error_outline</mat-icon>
                                    </div>
                                 
                                    <div class="source-form" id="source-form">
                                      <span class="text-bold" matTooltipClass="custom-tooltip" matTooltip="{{'label_Source'|translate}} : {{can.Source?can.Source:'--'}}">{{can.Source?can.Source:'--'}}</span>
                                      <mat-icon matTooltipClass="custom-tooltip" matTooltip="{{'label_CreatedOn' | translate}} {{can.CandidateCreatedOn  | date:userpreferences.timeformate:userpreferences.timezone}}">error_outline</mat-icon>
                                    </div> 
                                    <div class="source-form" id="source-form-application" *ngIf="!can?.AppliedSourceChild  == false">
                                      <span class="text-bold" matTooltipClass="custom-tooltip" matTooltip="{{'jobdetails_applied'|translate}} {{'label_Source'|translate}} : {{can.AppliedSourceChild }}">{{can.AppliedSourceChild }}</span>
                                      <mat-icon matTooltipClass="custom-tooltip" matTooltip="{{can.CreatedDate  | date:userpreferences.timeformate:userpreferences.timezone}}">error_outline</mat-icon>
                                    </div> -->
                                  </div>
 
                                  <div class="group-icon" id="group-icon">
                                    <button appDisableIfJobClosed 
                                    [isJobClosed]="IsJobClosed" mat-icon-button color="primary" id="descBtn" [disabled]="can.IsResume==0"
                                    class="resume PreviewMode" matTooltipClass="custom-tooltip" matTooltip="{{'label_View' | translate}} {{'candidate_resume' | translate}}" matTooltipClass="custom-tooltip"
                                    (click)="OpenResumePopUp(can)">
                                    <div class="two-icons">
                                      <mat-icon class="first-icon" id="first-icon-desc" fontSet="material-icons-outlined">description</mat-icon>
                                      <mat-icon class="secondIcon" id="secondIcon-outline">person</mat-icon>
                                    </div>
                                  </button>

                                    <button  appDisableIfJobClosed 
                                    [isJobClosed]="IsJobClosed" mat-icon-button tabindex id="thumb-up-btn_DragMode{{can?.CandidateId}}" class="accept PreviewMode"
                                      matTooltip="{{'label_jobDetails_Accept' | translate}}" matTooltipClass="custom-tooltip">
                                      <mat-icon>thumb_up</mat-icon>
                                    </button>
                                    <button appDisableIfJobClosed 
                                    [isJobClosed]="IsJobClosed" mat-icon-button tabindex id="thumb-down-btn_DragMode{{can?.CandidateId}}" class="reject PreviewMode"
                                    matTooltip="{{'label_jobDetails_Reject' | translate}}" matTooltipClass="custom-tooltip">
                                      <mat-icon>thumb_down</mat-icon>
                                    </button>
                                  </div>
                                </div>
                              </mat-card>
                              <div class="candidate-box-top" id="candidate-box-top">
                                <div class="candidate-box-avtaardetails" id="candidate-box-avtaardetails">
                                  <div class="candidate-box-avtaar" id="candidate-box-avtaar">
                                    <mat-checkbox appDisableIfJobClosed [isJobClosed]="IsJobClosed" [checked]="can.CheckboxStatus" color="primary" id="stageCheckId_{{stageData.StageName}}_{{i}}"
                                          name="stageCheckId_{{stageData.StageName}}_{{i}}" tabindex
                                          (change)="selectStageCanData(stageData,can,$event,j)">
                                    </mat-checkbox>
                                    <!-- adarsh singh for EWM-14514 open profile modal on 28-Sep-23 --><!-- Satya Prakash Gupta for EWM-14691 EWM-14724 open profile on 13-Oct-23 -->
                                    <div   class="userAvtaarAndName" id="userImage_{{can?.CandidateId}}" *ngIf="can.PreviewUrl !='' "  (click)="openCandidateDetails(can)"
                                    (mouseenter)="openProfile(can?.CandidateId, true)" (mouseleave)="closeProfile(can?.CandidateId, false)" cdkOverlayOrigin #trigger="cdkOverlayOrigin">
                                      <img src="{{can.PreviewUrl}}" *ngIf="can.PreviewUrl !='' " alt="user" />
                                      <ng-template
                                        cdkConnectedOverlay
                                        [cdkConnectedOverlayOrigin]="trigger"
                                        [cdkConnectedOverlayOpen]="profilePicStatus" *ngIf="isOpen==can?.CandidateId">
                                        <img class="hover-image" src="{{can.PreviewUrl}}" alt="user" />
                                      </ng-template>
                                    </div>
                                    <div appDisableIfJobClosed 
                                    [isJobClosed]="IsJobClosed"  class="userAvtaarAndName"  *ngIf="can.PreviewUrl =='' " (click)="openCandidateDetails(can)">
                                    
                                      <span [style.background]="can?.StatusColorCode">{{can?.ShortName}}</span>
                                    </div>
                                    <div class="diamond-screen" id="diamond-screen">
                                      <div  appDisableIfJobClosed 
                                      [isJobClosed]="IsJobClosed"  class="screen-card-main">
                                      <p matTooltipClass="custom-tooltip" matTooltip="{{can.CandidateName}}">
                                      <span (click)="openSingleCanActionView(can)" class="text-overflow">{{can.CandidateName}}</span>
                                     
                                      </p>
                                      <div class="screen-card" id="screen-card">
                                        <span (click)="openMoveBoxModal(can)" matTooltipClass="custom-tooltip" class="text-overflow" matTooltip="{{can.WorkFlowStageName}}">{{can.WorkFlowStageName?can.WorkFlowStageName:'--'}}</span>
                                      </div>
                                    </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="candidate-box-icons" id="candidate-box-icons">
                                  <div class="pin-unpin" id="pin-unpin">
                                    <button *ngIf="can?.IsPin === 0"  appDisableIfJobClosed 
                                    [isJobClosed]="IsJobClosed"  mat-icon-button class="pin-btn" tabindex id="thumb-up-btn"
                                    matTooltipClass="custom-tooltip" matTooltip="{{'label_jobDetails_Pin' | translate}}">
                                        <mat-icon fontSet="material-icons-outlined" id="pin-icon" (click)="markPinUnPin(can,stageData?.candidates,j)"
                                        >push_pin</mat-icon>
                                    </button>
                                    <button *ngIf="can?.IsPin === 1"appDisableIfJobClosed 
                                    [isJobClosed]="IsJobClosed"  mat-icon-button class="pin-btn pin-active" tabindex id="thumb-up-btn"
                                    matTooltipClass="custom-tooltip" matTooltip="{{'label_jobDetails_UnPin' | translate}}"
                                    (click)="markPinUnPin(can,stageData?.candidates,j)">
                                        <div class="two-icons" id="two-icons-unpin">
                                        <mat-icon class="first-icon" id="first-icon-unpin" fontSet="material-icons-outlined">push_pin</mat-icon>
                                        <mat-icon class="secondIcon" id="second-icon-unpin" fontSet="material-icons-outlined">horizontal_rule</mat-icon>
                                      </div>
                                    </button>
                                  </div>
                                  <div class="date" id="date-activity">
                                    <span>{{can.LastActivity | utctodate:timezonName:timezonName:userpreferences.timeformate }}</span>
                                  </div>
                                </div>
                              </div>
                              <div class="source-details" id="source-details">
                                <div class="source-data">
                                   <!--****card view source***-->
                                   <ng-container *ngIf="can?.AppliedSourceChild === null || can?.AppliedSourceChild ===''; else sourceChildExists">
                                    <div class="source-form" id="source-form-apply">
                                    <span class="text-bold" matTooltipClass="custom-tooltip"   matTooltip="{{'jobdetails_applied' | translate}} {{'label_Source' | translate}} : {{can.AppliedSource}}">
                                      {{can.AppliedSource}}
                                    </span>
                                    <mat-icon matTooltipClass="custom-tooltip" matTooltip="{{can.LastActivity | date:userpreferences.timeformate:userpreferences.timezone}}">
                                      error_outline
                                    </mat-icon>
                                  </div>
                                  </ng-container>
                                  
                                  <ng-template #sourceChildExists>
                                      <div class="source-form" id="source-form-apply">
                                    <span class="text-bold" matTooltipClass="custom-tooltip"   matTooltip="{{'label_Source' | translate}} : {{can.AppliedSource}}">
                                      {{can.AppliedSource}}
                                    </span>
                                    <mat-icon matTooltipClass="custom-tooltip"  matTooltip="{{can.LastActivity | date:userpreferences.timeformate:userpreferences.timezone}}">
                                      error_outline
                                    </mat-icon>
                                      </div>
                                      <div class="source-form" id="source-form-apply">
                                    <span class="text-bold" matTooltipClass="custom-tooltip" 
                                          matTooltip="{{'jobdetails_applied' | translate}} {{'label_Source' | translate}} : {{can.AppliedSourceChild}}">
                                      {{can.AppliedSourceChild}}
                                    </span>
                                    <mat-icon matTooltipClass="custom-tooltip"   matTooltip="{{can.LastActivity | date:userpreferences.timeformate:userpreferences.timezone}}">
                                      error_outline
                                    </mat-icon>
                                      </div>
                                  </ng-template>
                                  <!-- <div class="source-form" id="source-form-apply" *ngIf="can?.AppliedSourceChild  == true">
                                    <span class="text-bold cursorLink" (click)="OpenApplicationFormPopUp(can)" matTooltipClass="custom-tooltip" matTooltip="{{'jobdetails_applied'|translate}} {{'label_Source'|translate}} : {{can.AppliedSourceChild }}">{{can.AppliedSourceChild }}</span>
                                    <mat-icon matTooltipClass="custom-tooltip" matTooltip="{{can.LastActivity | date:userpreferences.timeformate:userpreferences.timezone}}">error_outline</mat-icon>
                                  </div> 
                                   <div class="source-form" id="source-form">
                                     <span class="text-bold" matTooltipClass="custom-tooltip" matTooltip="{{'label_Source'|translate}} kkkk: {{can.Source?can.Source:'--'}}">{{can.Source?can.Source:'--'}}</span>
                                    <mat-icon matTooltipClass="custom-tooltip" matTooltip="{{'label_CreatedOn' | translate}} {{can.CandidateCreatedOn  | date:userpreferences.timeformate:userpreferences.timezone}}">error_outline</mat-icon> 
                                  </div>
                                   <div class="source-form" id="source-form">
                                    <span class="text-bold" matTooltipClass="custom-tooltip" matTooltip="{{'label_Source'|translate}} : {{can.Source?can.Source:'--'}}">{{can.Source?can.Source:'--'}}</span>
                                    <mat-icon matTooltipClass="custom-tooltip" matTooltip="{{'label_CreatedOn' | translate}} {{can.CandidateCreatedOn  | date:userpreferences.timeformate:userpreferences.timezone}}">error_outline</mat-icon>
                                  </div> 
                                  <div class="source-form" id="source-form-application" *ngIf="!can?.AppliedSourceChild  == false">
                                    <span class="text-bold" matTooltipClass="custom-tooltip" matTooltip="{{'jobdetails_applied'|translate}} {{'label_Source'|translate}} : {{can.AppliedSourceChild }}">{{can.AppliedSourceChild }}</span>
                                    <mat-icon matTooltipClass="custom-tooltip" matTooltip="{{can.CreatedDate  | date:userpreferences.timeformate:userpreferences.timezone}}">error_outline</mat-icon>
                                  </div> -->
                                </div>
                                <div class="group-icon" id="group-icon">
                                  <button appDisableIfJobClosed 
                                  [isJobClosed]="IsJobClosed" mat-icon-button color="primary" id="descBtn" [disabled]="can.IsResume==0"
                                  class="resume" matTooltipClass="custom-tooltip" matTooltip="{{'label_View' | translate}} {{'candidate_resume' | translate}}" matTooltipClass="custom-tooltip"
                                  (click)="OpenResumePopUp(can)">
                                  <div class="two-icons">
                                    <mat-icon class="first-icon" id="first-icon-desc" fontSet="material-icons-outlined">description</mat-icon>
                                    <mat-icon class="secondIcon" id="secondIcon-outline">person</mat-icon>
                                  </div>
                                </button>
                                  <button mat-icon-button appDisableIfJobClosed 
                                  [isJobClosed]="IsJobClosed"  tabindex id="thumb-up-btn_{{can?.CandidateId}}" class="accept" [disabled]="stageData?.lastStage"
                                    matTooltip="{{'label_jobDetails_Accept' | translate}}" matTooltipClass="custom-tooltip" (click)="likeCandidate(can, stageData,can?.CandidateId)">
                                    <mat-icon>thumb_up</mat-icon>
                                  </button>
                                  <button appDisableIfJobClosed 
                                  [isJobClosed]="IsJobClosed"  mat-icon-button tabindex id="thumb-down-btn_{{can?.CandidateId}}" class="reject" [disabled]="!isAnyRejectedStageType"
                                  matTooltip="{{'label_jobDetails_Reject' | translate}}" matTooltipClass="custom-tooltip" (click)="dislikeCandidate(can, stageData,can?.CandidateId)">
                                    <mat-icon>thumb_down</mat-icon>
                                  </button>
                                </div>
                              </div>
                            </mat-card>
                            <!---------@When: 16-09-2023 @who:Amit @why: EWM-14372 @what: new card end here--------->
                          </div>
                        </cdk-virtual-scroll-viewport>
                        </div>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <!---------@When: 24-08-2023 @who:Amit @why: EWM-13874 @what: candidate actions start here--------->
                <div class="candidate-bottom-actions-main" id="candidate-bottom-actions-main"
                [ngClass]="{'ActiveActions':StageVisibilityCount>3, 'd-none': viewMode == 'listMode'}" >
                <div class="candidate-bottom-actions" id="candidate-bottom-actions"
                  [style.bottom]="showHideDocumentButtons?'25px':'-100%'">
                  <div class="candidate-bottom-actions-inside">
                    <div class="app-select">
                      <div class="big-number">{{selectedCandidates?.length}}</div>
                      <h3>{{'label_jobDetails_ApplicationsSelected' |translate}}</h3>
                    </div>
                    <div class="action-btn-group" style=" position: relative;" id="action-btn-group">
                      <div class="logo-loader" id="logo-loader" *ngIf="swiperLoader">
                        <div class="logo-loading"></div>
                      </div> 
                      <swiper class="swiper-action-button" [slidesPerView]="5" [spaceBetween]="0" [navigation]="navigation"
                        (swiper)="onSwiper($event)" *ngIf="stagesList?.length>0">
                        
                        <ng-template class="carousel-cell" swiperSlide>
                          <button mat-button class="btn-actions" id="btnActions" [disabled]="selectedCandidates?.length > NoOfCanSelectedEachStage || getSelectedCandidatesSameStageFlag()"
                            (click)="openActionView()" cdkOverlayOrigin #trigger="cdkOverlayOrigin"
                            [ngClass]="selectedCandidates?.length!=0 && getSelectedCandidatesSameStageFlag()? 'same-stage-show' : ''"
                            matTooltip="{{actiontBtnTooltip |translate}} {{actiontBtnTooltipCount | translate}}" matTooltipPosition="above"
                             [matTooltipClass]="selectedCandidates?.length > NoOfCanSelectedEachStage || getSelectedCandidatesSameStageFlag() ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'">
                            <mat-icon id="action-icon" fontSet="material-icons-outlined">fact_check</mat-icon>
                            <span>{{'label_jobDetailsAction' |translate}}</span>
                          </button>
                        </ng-template>
                        <ng-template class="carousel-cell" swiperSlide>
                          <button appDisableIfJobClosed 
                          [isJobClosed]="IsJobClosed" mat-button tabindex id="thumb-up-btnActionBar" (click)="onAccept()" [disabled]="getSelectedCandidatesSameStageFlag() || isLastSatgeCand"
                            matTooltip="{{acceptBtnTooltip | translate}}" matTooltipPosition="above"
                            [matTooltipClass]="getSelectedCandidatesSameStageFlag() || isLastSatgeCand ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'">
                            <mat-icon fontSet="material-icons-outlined">thumb_up</mat-icon>
                            <span>{{'label_jobDetails_Accept' |translate}}</span>
                          </button>
                        </ng-template>
                        <ng-template class="carousel-cell" swiperSlide>
                          <button appDisableIfJobClosed 
                          [isJobClosed]="IsJobClosed" mat-button tabindex id="thumb-down-btnActionBar" (click)="onReject()"  [disabled]="!isAnyRejectedStageType || getSelectedCandidatesSameStageFlag()"
                          matTooltip="{{rejectBtnTooltip | translate}}" matTooltipPosition="above"
                          [matTooltipClass]="!isAnyRejectedStageType || getSelectedCandidatesSameStageFlag() ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'">
                            <mat-icon fontSet="material-icons-outlined">thumb_down</mat-icon>
                            <span>{{'label_jobDetails_Reject' |translate}}</span>
                          </button>
                        </ng-template>
                        <ng-template class="carousel-cell" swiperSlide>
                          <button mat-button *ngIf="!isSelectedCandOfOtherSatgesOnly" id="btnRemoveCand" [disabled]="!isSelectedCandOfFirstSatgesOnly"
                            matTooltip="{{removeBtnTooltip |translate}}" matTooltipPosition="above"
                            (click)="onOpenRemoveCandidatePop()"
                            [matTooltipClass]="!isSelectedCandOfFirstSatgesOnly ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'">
                            <mat-icon id="remove_circle_outline" fontSet="material-icons-outlined">remove_circle_outline</mat-icon>
                            <span>{{'label_jobDetails_Remove' |translate}}</span>
                          </button>

                          <button mat-button *ngIf="isSelectedCandOfOtherSatgesOnly" id="btnRemoveCandSingle" [disabled]="selectedCandidates?.length > 1"
                            matTooltip="{{removeBtnTooltip |translate}}" matTooltipPosition="above"
                            matTooltipClass="custom-tooltip-top" (click)="onOpenRemoveCandidatePop()"
                            [matTooltipClass]="selectedCandidates?.length > 1 ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'">
                            <mat-icon id="remove_circle_outline" fontSet="material-icons-outlined">remove_circle_outline</mat-icon>
                            <span>{{'label_jobDetails_Remove' |translate}}</span>
                          </button>

                        </ng-template>
                        <ng-template class="carousel-cell" swiperSlide>
                          <button mat-button id="btnRead" [disabled]="selectedCandidates?.length>NoOfCanSelectedEachStage" (click)="markAsRead(selectedCandidates)"
                            matTooltip="{{readBtnTooltip |translate}} {{actiontBtnTooltipCount | translate}}" matTooltipPosition="above"
                            [matTooltipClass]="selectedCandidates?.length>NoOfCanSelectedEachStage ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'">
                            <mat-icon id="mail-icon" fontSet="material-icons-outlined">mark_as_unread</mat-icon>
                            <span>{{'label_jobDetails_Read' |translate}}</span>
                          </button>
                        </ng-template>
                        <ng-template class="carousel-cell" swiperSlide>
                          <button mat-button id="btnRead" [disabled]="selectedCandidates?.length>NoOfCanSelectedEachStage" (click)="markAsUnRead(selectedCandidates)"
                            matTooltip="{{unreadBtnTooltip |translate}} {{actiontBtnTooltipCount | translate}}" matTooltipPosition="above"
                            [matTooltipClass]="selectedCandidates?.length>NoOfCanSelectedEachStage ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'">
                            <mat-icon id="mail-icon" fontSet="material-icons-outlined">mark_as_unread</mat-icon>
                            <span>{{'label_jobDetails_UnRead' |translate}}</span>
                          </button>
                        </ng-template>
                        <ng-template class="carousel-cell" swiperSlide>
                             <!-- by maneesh remove zoom check status -->
                             <a mat-button id="btncall" matTooltip="{{callBtnTooltip |translate}}"
                             (click)="onCall()"
                           [matTooltipClass]="selectedCandidates?.length>1  || selectedCandidates[0]?.PhoneNumber == '' ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'"
                           [disabled]="selectedCandidates?.length>1  || selectedCandidates[0]?.PhoneNumber == ''" matTooltipPosition="above"
                           href="tel:{{selectedCandidates[0]?.PhoneNumber}}" mat-icon-button>
                           <mat-icon id="sms-icon" fontSet="material-icons-outlined">call</mat-icon>
                           <span>{{'label_call' |translate}}</span>
                         </a>

                        </ng-template>
                        <ng-template class="carousel-cell" swiperSlide>
                          <button mat-button id="btnmail" (click)="openNewEmailModalForSingleMultiCand()"
                            matTooltip="{{'label_mail' |translate}}" matTooltipClass="custom-tooltip-top" matTooltipPosition="above">
                            <mat-icon id="mail-new-icon" fontSet="material-icons-outlined">mail</mat-icon>
                            <span>{{'label_mail' |translate}}</span>
                          </button>
                        </ng-template>
                        <ng-template class="carousel-cell" swiperSlide>
                          <button mat-button id="btnsms" [disabled]="!SMSCheckStatus" (click)="onSendSMSToCandidate()"
                          matTooltip="{{smsBtnTooltip |translate}}" matTooltipPosition="above"
                          [matTooltipClass]="!SMSCheckStatus ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'">
                          <mat-icon id="sms-icon" fontSet="material-icons-outlined">sms</mat-icon>
                          <span>{{'label_SMS' |translate}}</span>
                          </button>
                        </ng-template>
                        <ng-template class="carousel-cell" swiperSlide>
                          <button *ngIf="(EOHIntegrationObj?.candExtractEnable == 1) && (IsEOHIntergrated)" class="push-candidate-icon-button logo-with-text" mat-button id="shareJObBtn"
                          [disabled]="selectedCandidates?.length>1 || selectedCandidates?.length==0"
                          (click)="shareJob()">
                          <mat-icon id="sms-icon" class="short-cut" fontSet="material-icons-outlined">shortcut</mat-icon>
                          <span>{{'label_ShareJob' |translate}}</span>
                          </button>
                        </ng-template>
                        <ng-template class="carousel-cell" swiperSlide>
                          <button mat-button id="btnactivity" [disabled]="selectedCandidates?.length>1"
                            (click)="onOpenCandidateCardActivityPop()" matTooltip="{{activityBtnTooltip |translate}}"
                             matTooltipPosition="above"
                            [matTooltipClass]="selectedCandidates?.length>1 ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'">
                            <mat-icon id="laptop-icon" fontSet="material-icons-outlined">laptop_mac</mat-icon>
                            <span>{{'label_MenuActivity' |translate}}</span>
                          </button>
                        </ng-template>
                        <ng-template class="carousel-cell" swiperSlide>
                          <button mat-button id="btnpin"    [disabled]="selectedCandidates?.length>NoOfCanSelectedEachStage || getSelectedCandidatesSameStageFlag()"
                            class="push-pin-btn" (click)="pinUnPinForMultipleCand()" matTooltip="{{pinBtnTooltip |translate}} {{actiontBtnTooltipCount | translate}}"
                            matTooltipPosition="above" matTooltipClass="custom-tooltip-top"
                            [matTooltipClass]="selectedCandidates?.length>NoOfCanSelectedEachStage || getSelectedCandidatesSameStageFlag() ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'">
                            <mat-icon id="push-icon" fontSet="material-icons-outlined">push_pin</mat-icon>
                            <span>{{'label_jobDetails_Pin' |translate}}</span>
                          </button>
                        </ng-template>
                        <ng-template class="carousel-cell carousel-cell-map-to-folder" swiperSlide>
                          <button mat-button id="btnfolder" appDisableIfJobClosed [isJobClosed]="IsJobClosed" [disabled]="selectedCandidates?.length>NoOfCanSelectedEachStage" (click)="onMappCandidateFolder()" class="move-to-folder"
                            matTooltip="{{moveToFolderBtnTooltip |translate}} {{actiontBtnTooltipCount | translate}}" matTooltipPosition="above"
                            [matTooltipClass]="selectedCandidates?.length>NoOfCanSelectedEachStage ? 'custom-tooltip-top tooltipError' : 'custom-tooltip-top'">
                            <mat-icon id="drive-icon" fontSet="material-icons-outlined">drive_file_move</mat-icon>
                            <span>{{'label_jobDetails_MovetoFolder' |translate}}</span>
                          </button>
                        </ng-template>
                      </swiper>
                    </div>
                    <div class="cancel-btn">
                    <button mat-icon-button class="btn-cancel" id="btn-cancel" (click)="onCloseToggleAction()"
                      matTooltip="{{'label_cancel' |translate}}" matTooltipPosition="above" matTooltipClass="custom-tooltip-top"
                      (mouseenter)="mouseoverAnimation(animationVar?.RotateButtonClose?.id, animationVar?.RotateButtonClose?.animation)"
                      (mouseleave)="mouseleaveAnimation(animationVar?.RotateButtonClose?.id, animationVar?.RotateButtonClose?.animation)">
                      <mat-icon id="cancel-icon" fontSet="material-icons-outlined"
                      id="{{animationVar?.RotateButtonClose?.id}}" class="{{animationVar?.RotateButtonClose?.isAnimClass}}">close</mat-icon>
                    </button>
                    </div>
                  </div>

                </div>
              </div>
              <!---------@When: 24-08-2023 @who:Amit @why: EWM-13874 @what: candidate actions end here--------->
              </div>
              <div *ngIf="viewMode == 'listMode' " class="job-detail-list-view" id="job-detail-list-view">
                <job-listview *ngIf="listModeObj?.JobId && JobDetails?.ClientId" [listViewObj]="listModeObj"
                (isResponseGetFromServer)="getResFromChildComp($event)"
                (getSelectedDataOnEveryChange)="getSelectedCandidate($event)"
                (parentRefreshType)="onParentRefreshType($event)"
                (sendEventTypeOnParent)="onParentOpenModalType($event)"
                [JobDetails]="JobDetails"
                [headerListData]="headerListData"
                [firstStageData]="firstStageData"
                [commonMethodeGetData]="commonMethodeGetData" [IsJobClosed]="IsJobClosed"></job-listview>
              </div>
            </div>
          </mat-drawer-container>
        </mat-tab>
        <!--------mat-tab search candidate----->
        <mat-tab>
          <ng-template mat-tab-label>
            <!-- who:maneesh,what:ewm-18/09/2023,what:ewm-11774 for change label -->
            <mat-icon class="example-tab-icon">people_alt</mat-icon>
            {{'label_AssignCandidate' | translate}}
            <!---<span class="numbers">{{candidateMappedJobCount}}</span>----->
          </ng-template>
          <app-search-candidate [JobName]="JobName" [JobId]="JobId" [WorkflowName]="WorkflowName"
            [JobReferenceId]="getResponseEmailPhone?.JobReferenceId" [WorkflowId]="WorkflowId" [IsJobClosed]="IsJobClosed" [JobLatitude]="JobLatitude" [JobLongitude]="JobLongitude"
            *ngIf="isActiveSearchCandidate" (assignToJob)="assignToJob($event)"></app-search-candidate>
        </mat-tab>
        <!--------search candidate end------>
        <mat-tab id="recentActivities-tab">
          <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon">local_activity</mat-icon>
            {{'label_MenuActivity' | translate}}<span class="numbers">{{dataTotalActivity}}</span>
          </ng-template>
          <app-job-activity *ngIf="isRecentActivity" [Names]="JobName" [Employee]="documentForJob"
            [emailConnection]="emailConnection" [GridId]="GridId" [category]="category" [candidateIdData]="JobId"
            [candidateId]="candidateId" (clientActivityCount)="fetchEmployeeActivityCount($event)"
            [jobContactDetails]="jobContactDetailsArr">
          </app-job-activity>
        </mat-tab>
        <mat-tab id="notes-tab">
          <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon">text_snippet</mat-icon>
            {{'candidate_notes' | translate}}<span class="numbers">{{dataTotalNotes}}</span>
          </ng-template>
         
          <app-job-notes *ngIf="isActiveNotes && isClientId" [Names]="JobName" [GridId]="GridIdNotes" [category]="category"
            [jobIdData]="JobId" [InputClientID]="isClientId" [workflowId]="workflowId" (jobNotesCount)="fetchJobNotesCount($event)"></app-job-notes>
        </mat-tab>
        <mat-tab id="notes-tab">
          <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon">history</mat-icon>
            {{'label_job_log' | translate}}
          </ng-template>
          <app-job-log *ngIf="isJobLog" [Names]="JobName" [GridId]="GridId" [category]="category" [jobIdData]="JobId"
            (jobCount)="fetchJobNotesCount($event)"></app-job-log>
        </mat-tab>
        <mat-tab id="attachments-tab">
          <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon">attachment</mat-icon>
            {{'candidate_documents' | translate}}<span class="numbers">{{totalDocuments}}</span>
          </ng-template>
          <app-job-document *ngIf="showJobDocuments" [candidateId]="candidateIdForJobDoc"
            [documentFor]="documentForJob" (totalDocs)="fetchDataFromDocs($event)"></app-job-document>
        </mat-tab>
          <!-- who:maneesh,what:ewm-13861 for disable,when:22/09/2022 -->
        <mat-tab id="manageJobPosting-tab" [disabled]="IsJobClosed==1">
          <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon rotate-icon">campaign</mat-icon>
            {{'label_manageJobPosting' | translate}}<span class="numbers">{{JobDetails?.PublishedJobCount}}</span>
          </ng-template>
          <app-manage-job-posting *ngIf="isManageJobPosted" [JobId]="JobId"
            [JobReferenceId]="getResponseEmailPhone?.JobReferenceId" [WorkflowId]="WorkflowId">
          </app-manage-job-posting>
        </mat-tab>
        <mat-tab id="manageJobPosting-tab" [disabled]="IsJobClosed==1">
          <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon" fontSet="material-icons-outlined">call</mat-icon>
            {{'Call' | translate}}<span class="numbers">{{callDataCount}}</span>
          </ng-template>
          <app-job-call-histroy [JobIdForVxt]="true" *ngIf="CallTab">
          </app-job-call-histroy>
        </mat-tab>
      </mat-tab-group>
    </mat-card-content>
  </mat-card>
</mat-drawer-container>
<mat-drawer-container class="job-details-overlay-sidebar" autosize>
  <!-- candidate Job Mapping View -->
  <mat-drawer #candidateJob class="drawerSidenav addJobCandidateSummarySidebar" mode="over" disableClose="true"
    position="end">
    <div class="closePanel">
      <button class="closeDrawerIcon" id="closeDrwerMaped" mat-stroked-button
        (click)="toggleDrwer(candidateJob); openDrawerWithBg(true)">
        <mat-icon>arrow_forward_ios</mat-icon>
      </button>
      <button class="sidebarSectionName addCandidateToJobBtn" mat-raised-button color="primary" type="button"
        id="btnAssignCandidate">{{'jobdetails_AddCandidateToJob'|translate }}</button>
    </div>
    <div class="panelSidebarInformation" *ngIf="iscandidateJob">
      <mat-card *ngIf="iscandidateJob" class="drawer-mat-card">
        <app-candidate-job-mapped [JobId]="JobId" [JobName]="JobName" [WorkflowId]="WorkflowId"
          [WorkflowName]="WorkflowName" (totalNotes)="fetchDataFromNotes($event)"
          (childButtonEvent)="receivedMessageHandler($event,candidateJob)"></app-candidate-job-mapped>
      </mat-card>
    </div>

  </mat-drawer>
  <!--candidate Job Mapping View -->
</mat-drawer-container>
<!-- EWM : Satya Prakash Gupta : 14-Dec-2022 : full screen drawer change : EWM-9617 EWM-9869 -->
<ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="overlayCandidateSummary">
  <mat-drawer-container class="overlay-drawer-container" autosize>
    <!-- @When: 17-10-2023 @who:Amit @why: EWM-14846 @what: view candiddate summary add -->
    <mat-drawer #candidateSummary opened class="overlay-drawer"
      mode="over" disableClose="true" position="end">
      <div class="closePanel">
        <button class="closeDrawerIcon" mat-stroked-button id="closeDrawerIcon" (click)="closeCandidateSummary(true)">
          <mat-icon>close</mat-icon>
        </button>
        <button class="sidebarSectionName candidate-summary-btn" mat-raised-button color="primary" type="button"
          id="btnAssignCandidate">{{'jobdetails_candidateSummary'|translate }}</button>
      </div>
      <div class="view-profile-summary" id="job-Detail-Information" *ngIf="hidecomponent">
          <app-profile-summary [candidateId]="candidateIdData"></app-profile-summary>
      </div>
    </mat-drawer>
  </mat-drawer-container>
</ng-template>
<ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="trigger" [cdkConnectedOverlayOpen]="overlayViewjob">
  <mat-drawer-container class="overlay-drawer-container" autosize>
    <!-- Job Details View -->
    <mat-drawer #jobView opened class="overlay-drawer overlay-md-drawer" mode="over" disableClose="true"
      position="end">
      <div class="closePanel">
        <button id="closeDrawer" class="closeDrawerIcon" mat-stroked-button (click)="closeJobview(false)">
          <mat-icon>close</mat-icon>
        </button>
        <button id="sidebarSectionName" class="sidebarSectionName overlay-md-btn" mat-raised-button color="primary"
          type="button" id="btnAssignCandidate">{{'quickjob_JobDetailView'|translate
          }}</button>
      </div>
      <div class="view-profile-summary view-job-details" id="panel-sidebar-information" *ngIf="isJobDetailsView">
          <app-job-manage [hideForJobDetailsView]="true" [jobId]="JobId">
          </app-job-manage>
      </div>
    </mat-drawer>
    <!--End Job Details View -->
  </mat-drawer-container>
</ng-template>
<ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="overlayMappApplicationForm">
  <mat-drawer-container class="overlay-drawer-container" autosize>
    <!-- candidate map Application form -->
    <mat-drawer #candidateMapApplicationForm opened class="overlay-drawer overlay-sm-drawer" mode="over"
      disableClose="true" position="end">
      <div class="closePanel">
        <button class="closeDrawerIcon" id="closeDrwerMaped" mat-stroked-button
          (click)="closeMappApplicationForm(false)">
          <mat-icon>close</mat-icon>
        </button>
        <button class="sidebarSectionName overlay-sm-btn" mat-raised-button color="primary" type="button"
          id="btnAssignCandidate">{{'label_mapApplicationForm'|translate }}</button>
      </div>
      <div class="view-profile-summary view-map-application" *ngIf="isMapApplicationForm">
          <app-map-application-form [JobId]="JobId" [JobName]="JobName" [WorkflowId]="WorkflowId"
            [WorkflowName]="WorkflowName" (totalNotes)="fetchDataFromNotes($event)"
            (onMapApplicationForm)="fetchDataFromParent($event)" (childButtonEvent)="receivedMessageHandler($event)">
          </app-map-application-form>
      </div>
    </mat-drawer>
    <!--candidate map Application form -->
  </mat-drawer-container>
</ng-template>
<ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="overlayShareJobApplicationForm">
  <mat-drawer-container class="overlay-drawer-container" autosize>
    <!-- share Application form -->
    <mat-drawer #shareJobApplicationForm opened class="overlay-drawer overlay-sm-drawer" mode="over"
      disableClose="true" position="end">
      <div class="closePanel">
        <button class="closeDrawerIcon" id="closeDrwerMaped" mat-stroked-button
          (click)="closeShareJobApplicationForm(false)">
          <mat-icon>close</mat-icon>
        </button>
        <button class="sidebarSectionName overlay-sm-btn" mat-raised-button color="primary" type="button"
          id="btnAssignCandidate">{{'label_share_job_application_url'|translate }}</button>
      </div>

      <div class="view-profile-summary share-map-application" *ngIf="isShareJobApplicationUrl" id="panel-sidebar-information">
          <app-share-job-application-url [JobId]="JobId" [JobName]="JobName" [WorkflowId]="WorkflowId" [JobExpiryDays]="JobExpiryDays"
            [WorkflowName]="WorkflowName" (jobApplicationUrlDrawer)="JobApplicationUrlCloseDrawer($event)">
          </app-share-job-application-url>
      </div>

    </mat-drawer>
    <!--share Application form -->
  </mat-drawer-container>
</ng-template>
<ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="trigger" [cdkConnectedOverlayOpen]="overlayClientDetail">
  <mat-drawer-container class="overlay-drawer-container" autosize>
    <!-- Job Details View -->
    <mat-drawer #clientDetail opened class="overlay-drawer" mode="over" disableClose="true" position="end">
      <div class="closePanel">
        <button id="closeDrawer" class="closeDrawerIcon" mat-stroked-button (click)="closeClientDetail(false)">
          <mat-icon>close</mat-icon>
        </button>
        <button id="sidebarSectionName" class="sidebarSectionName client-detail-btn" mat-raised-button color="primary"
          type="button" id="btnAssignCandidate">{{'label_Client_view'|translate}}</button>
      </div>
      <div class="view-profile-summary client-detail-summary" id="job-Detail-Information" *ngIf="isClientDetailView">
        <app-client-detail [clientId]="isClientId">
        </app-client-detail>
    </div>
    </mat-drawer>
    <!--End Job Details View -->
  </mat-drawer-container>
</ng-template>
<!---------@When: 22-sep-2023 @who:maneesh @why: EWM-11774 Desc- open drawer --------->
<ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="trigger" [cdkConnectedOverlayOpen]="overlayCandidateProfile">
  <mat-drawer-container class="overlay-drawer-container" autosize>
    <mat-drawer #candidateSummary opened class="overlay-drawer overlay-md-drawer" mode="over"
      disableClose="true" position="end">
      <div class="closePanel">
          <button class="closeDrawerIcon" mat-stroked-button id="closeDrawerIcon"
            (click)="CloseShareAssessmentFromJobAction()">
            <mat-icon>close</mat-icon>
          </button>
          <button class="sidebarSectionName overlay-md-btn" mat-raised-button id="editJObOwnerContactData" color="primary" type="button"
          id="btnAssignCandidate">{{'quickjob_quickEditJob'|translate }}</button>
        </div>

      <!-- this is for view and Edit mode both will work from here with Flotting button -->
      <div class="view-profile-summary view-job-details edit-job" id="panel-sidebar-information" *ngIf="candidateProfileDrwerForEdit">
        <app-job-manage [FocusContactField]="FocusContactField" [ownersData]="ownersData" [workflowStatus]="workflowStatus" [hideUpperSaveCancelButton]="false" (valueChange)='closeDrawerOfEditMode($event)'></app-job-manage>
      </div>

      <!-- End  -->

    </mat-drawer>
  </mat-drawer-container>
</ng-template>
<!-- Xeople : Satya Prakash Gupta : 1-Oct-2021 : job detail : EWM-2865 EWM-2960 : start end -->
