
<!--
  @(C): Entire Software
  @Type: File, <html>
  @Name: document-popup.component.ts
  @Who: Renu
  @When: 20-June-2022
  @Why: EWM-7151 EWM-7233
  @What: document popup component
-->

<div *ngIf="loading" class="logo-loader new-logo-loader" id="logo-loader">
    <svg id="uuid-d007ca5b-8cc9-4eb1-b22b-737d4ac8c97a" class="svg-loader" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 146.77 179.91">
        <defs>
          <radialGradient id="uuid-0f71c9eb-ebcc-4ebc-83e0-179accc70292" data-name="New Gradient Swatch 6" cx="121.51" cy="137.48" fx="144.95" fy="163.86" r="47.34" gradientTransform="translate(-37.36 -25.52) rotate(-12) scale(1 1.4)" gradientUnits="userSpaceOnUse">
            <stop offset=".26" stop-color="#8b63a9"/>
            <stop offset=".5" stop-color="#6c3f97"/>
            <stop offset=".8" stop-color="#381f75"/>
          </radialGradient>
          <linearGradient id="uuid-dc932506-eed1-43d3-bec4-fbecab1521c2" data-name="New Gradient Swatch 3" x1="-3.87" y1="152.86" x2="154.54" y2="95.21" gradientUnits="userSpaceOnUse">
            <stop offset=".3" stop-color="#cd181e"/>
            <stop offset=".8" stop-color="#f58a1f"/>
            <stop offset=".95" stop-color="#fcb813"/>
          </linearGradient>
          <radialGradient id="uuid-ba892379-9f70-43df-91c4-a59d35673950" cx="33.54" cy="73.74" fx="12.03" fy="51.89" r="42.9" gradientTransform="translate(6.22 -45.84) rotate(3) scale(1 1.6)" gradientUnits="userSpaceOnUse">
            <stop offset=".29" stop-color="#c5168c"/>
            <stop offset=".58" stop-color="#90278e"/>
            <stop offset=".88" stop-color="#381f75"/>
          </radialGradient>
        </defs>
        <path class="upper-circle circle" d="m55.78,28.33c-4.76-11.98,2.87-26.39,15.77-28.09,20.57-2.71,38.06,17.59,23.64,37.32-16.75,22.92-33.67,5.18-39.41-9.23"/>
        <path class="last-curve path" d="m139.75,140.86c-3.29-3.34-9.1-6.93-15.12-10.98-16.99-11.42-26.28-24.17-17.29-35.1-1.04,1.28-2.05,2.62-2.99,4.04-10.6,15.91-11.39,48.61,1.21,68.9,3.13,5.03,6.7,8.15,10.24,9.97,2.78,1.26,5.4,2,7.39,2.17,0,0,.87.04,1.12.04,12.04,0,22.45-10.22,22.45-22.66,0-7.17-3.1-12.41-7.02-16.38Z"/>
        <path class="third-curve path" d="m123.2,179.87s-.01,0-.02,0c0,0,0,0-.01,0,0,0,.02,0,.03,0-1.99-.18-4.61-.91-7.39-2.17-3.54-1.83-7.12-4.94-10.24-9.97-12.6-20.29-11.81-52.98-1.21-68.9.03-.04.05-.08.08-.12.43-.64.87-1.26,1.31-1.86.07-.09.14-.18.21-.28.44-.6.9-1.18,1.36-1.75,0-.01.02-.02.03-.03,0,0-.01.02-.02.02,12.41-15.28,30.75-21.94,30.75-41.46,0-10.39-7.98-17.82-17.82-17.82-2.3,0-14.06.29-24.71,19.42-.05.09-.11.2-.16.3-2.12,3.89-6.06,12.62-9.49,20.37-5.28,11.95-7.84,21.95-21.1,33.87-14.23,12.79-37.83,24-37.83,24,0,0,.08-.04.18-.11-8.82,4.79-16,8.48-17.85,9.76-6.82,4.69-9.29,10.95-9.29,16.81,0,11.03,8.94,19.96,19.96,19.96,24.87,0,36.05-43.28,58.99-35.22,13.98,4.91,22.05,34.21,44.25,35.18,0,0,0,0,0,0,0,0,0,0,0,0Z"/>
        <path class="first-curve path" d="m49.11,35.86c-4.72-4.53-10.39-7.67-17.69-7.67-13.35,0-24.17,10.82-24.17,24.18,0,7.25,2.96,12.87,7.4,17.35,10.31,10.43,32.18,21.11,32.49,38.48,0,2.69-.23,4.92-1.3,7.82-.46,1.23-1.12,2.29-1.85,3.28,1.78-2.1,3.55-4.54,5.34-7.41,10.61-17.11,10.53-38.81,10.52-39.48-.36-23.41-4.64-30.44-10.72-36.54,0,0,0,0,0,0"/>
        <path class="second-curve path" d="m77.7,72.63c-9.75-.86-15.63-23.33-27.87-36.03,5.7,5.96,9.66,13.33,10.01,35.81,0,.59.07,17.53-7.2,33.27-.22.53-.2.46-.42.89-.43.9-.89,1.78-1.37,2.67-.09.16-.17.32-.26.48-.39.7-.79,1.39-1.21,2.07-.02.04-.04.08-.07.12-.12.19-.25.4-.4.62-.02.04-.05.07-.07.11-.38.61-.77,1.2-1.15,1.76-.02.03-.04.06-.07.1-.38.56-.77,1.12-1.15,1.64-.11.15-.22.3-.34.45-.3.4-.59.8-.89,1.18-.42.54-.85,1.06-1.27,1.56.02-.03-2.47,2.79-3.66,3.95-5.77,5.64-13.36,10.25-13.36,10.25,0,0,23.6-11.21,37.83-24,13.26-11.92,15.83-21.92,21.1-33.87,3.51-7.96,7.57-16.94,9.65-20.67-5.2,9.34-9.49,18.42-17.84,17.68Z"/>
    </svg>
  </div>
   
<div class="quick-dialog">
    <h2 mat-dialog-title  class="breadcum">
        {{'label_adddocuments'|translate}} in
        <!-- {{data.Name==''?'.\/':data.Name}} -->
            <a class="breadcumContent" *ngFor="let label of data?.Name"> {{label?.Name}} 
                <span class="arrowIcon">/</span> </a>
        </h2>
    <mat-dialog-content  #target> 
        <div class="addEditSec" >
            <ng-template #template let-anchor>
                <span>{{ anchor.nativeElement.innerText }}</span>
            </ng-template>
            <form novalidate [formGroup]="addForm" accept-charset="utf-8" enctype='multipart/form-data'>
               
                    <div class="ng-slectBox">
                        <app-custome-dropdown-with-two-variabel tabindex="3" [selectedIn]="selectedDocumentname"
                            [resetFormSubject]="resetDdl.asObservable()" (selectedOut)="onChangeDocumentName($event)"
                            [config]="dropDocumrntnameConfig"></app-custome-dropdown-with-two-variabel>
                    </div>
                
                    <app-document-upload [activestatus]="activestatus" [filestatus]="filestatus"
                    [filePathOnServer]="filePathOnServer" [fileInfo]="fileInfo" [fileViewstatus]="fileViewstatus"
                        (informDocumentParent)="documentDataFetchFromChild($event)"></app-document-upload>
                    
                <div [hidden]="hideFileName">
                    <mat-form-field floatLabel="always">
                        <mat-label>{{'label_filename'|translate}} </mat-label>
                        <p class="mat-card-subtitle">{{'label_fileNameLable'|translate}} </p>
                        <input matInput formControlName="Name" (blur)="checkDuplicity('Name')" id="fileName"
                            tabindex="1" placeholder="{{'label_filename'|translate}}" required cdkFocusInitial/>
                        <mat-error *ngIf="addForm.controls['Name'].hasError('required')">
                            {{'label_filename'|translate}} {{'label_errorreqired'|translate}}
                        </mat-error>
                        <mat-error *ngIf="addForm.controls['Name'].hasError('maxlength')">
                            {{'label_filename'|translate}} {{'label_errormaxlength100'|translate}}
                        </mat-error>
                        <mat-error *ngIf="addForm.controls['Name'].hasError('codeTaken')">
                            {{'label_filename'|translate}} {{'label_errorreqiredAlready'|translate}}
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="counterTxt">
                    <mat-form-field>
                        <mat-label>{{'label_comment' | translate}}</mat-label>
                        <textarea type="text" tabindex formControlName="Comment" matInput
                            (keyup)="onMessage($event.target.value)" id="document-comment"></textarea>
                        <mat-error *ngIf="this.addForm.controls['Comment'].hasError('maxlength')">
                            {{ 'label_comment' |translate}} {{ 'label_errormaxlength500' |translate}}
                        </mat-error>
                    </mat-form-field>
                    <span class="countlabel" color="warn">
                        {{'label_balance' |translate}}:{{maxMessage}} {{'label_characters' |translate}}
                    </span>
                </div>
            <div class="show-hide">   
                <button mat-stroked-button color="primary"  tabindex type="button"  (click)="onHideMoreField('target')" id="btnHideShow"> 
                    <span  *ngIf="!hideMoreFields">{{'label_ShowMoreFiled'|translate}} <mat-icon> expand_more </mat-icon></span>
                    <span  *ngIf="hideMoreFields">{{'label_hideMoreField'|translate}} <mat-icon> expand_less </mat-icon></span>
                </button>
            </div> 

            <div *ngIf="(showReferenceId===true || showStartDate===true || showExpiryDate===true)||(hideMoreFields===true)">
                    <mat-form-field>
                        <mat-label>{{'label_weightage'|translate}}</mat-label>
                        <input matInput formControlName="Weightage"
                            id="Weightage" tabindex="4" placeholder="{{'label_weightage'|translate}}" readonly/>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'label_referenceId'|translate}}</mat-label>
                        <input matInput formControlName="ReferenceId"
                            id="fileName" tabindex="4" placeholder="{{'label_referenceId'|translate}}" [required]="showReferenceId" />
                         <mat-error *ngIf="addForm.controls['ReferenceId'].hasError('required')">
                            {{'label_referenceId'|translate}} {{'label_errorreqired'|translate}}
                        </mat-error>
                        <mat-error *ngIf="addForm.controls['ReferenceId'].hasError('maxlength')">
                            {{'label_referenceId'|translate}} {{'label_errormaxlength50'|translate}}
                        </mat-error>
                    </mat-form-field>
                    <!-- @Who: bantee ,@When: 12-04-2023, @Why: EWM-11854 ,What: add CustomValidatorService to the start date control -->
                    <mat-form-field>
                        <mat-label>{{'label_startDate' | translate}}</mat-label>
                        <input matInput [matDatepicker]="picker2" (dateInput)="inputEventStart(addForm.value.StartDate)" tabindex  [placeholder]="getDateFormat"
                            id="experience-startDate" [max]="today" formControlName="StartDate" [required]="showStartDate">
                            <!-- @When: 23-march-2023 EWM-9802 For clear start date pass parameter -->
                            <button *ngIf="addForm.value.StartDate ||  addForm.controls['StartDate'].hasError('matDatepickerParse')" id="clearBtn" matSuffix mat-icon-button aria-label="Clear"
                            (click)="clearStartDateEndDate('startDate')" > 
                            <mat-icon>close</mat-icon>
                        </button>
                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                        <mat-datepicker #picker2></mat-datepicker>
                        <!-- <mat-error *ngIf="this.addForm.controls['StartDate'].hasError('required')">
                            {{ 'label_startDate' |translate}} {{'label_errorreqired'|translate}} </mat-error> -->
                            <mat-error *ngIf="addForm.controls['StartDate'].hasError('required') && addForm.controls['StartDate'].touched && !addForm.controls['StartDate'].hasError('matDatepickerParse')"> {{'label_startDate'|translate}} {{'label_errorreqired'|translate}} </mat-error>
                            <mat-error *ngIf="addForm.controls['StartDate'].hasError('invalidDate') && !addForm.controls['StartDate'].hasError('required')"> {{'label_invalidDate' | translate}} </mat-error>
                            <mat-error *ngIf="addForm.controls['StartDate'].hasError('matDatepickerParse') && !addForm.controls['StartDate'].hasError('matDatepickerMax')"> {{'label_invalidDate' | translate}}</mat-error>
                            <mat-error *ngIf="addForm.controls['StartDate'].hasError('matDatepickerMax') && !addForm.controls['StartDate'].hasError('invalidDate')"> {{'label_startDate' | translate}} {{'label_shouldNotMoreThanExp' | translate}}</mat-error>
                            <mat-error *ngIf="addForm.controls['StartDate'].hasError('matDatepickerMin') && !addForm.controls['StartDate'].hasError('invalidDate')"> {{'label_mustbe' | translate}} </mat-error>
                    </mat-form-field>
                    <mat-form-field >
                        <mat-label>{{'label_cardExpiryDate' | translate}}</mat-label>
                        <input matInput [matDatepicker]="picker1" tabindex id="experience-endDate" [min]="endDay"
                            formControlName="ExpiryDate" [required]="showExpiryDate" [placeholder]="getDateFormat" (dateInput)="inputEventStart(addForm.value.StartDate)">
                            <!-- @When: 23-march-2023 EWM-9802 For clear end date pass parameter -->
                            <button *ngIf="addForm.value.ExpiryDate ||  addForm.controls['ExpiryDate'].hasError('matDatepickerParse')" id="clearBtn" matSuffix mat-icon-button aria-label="Clear"
                            (click)="clearStartDateEndDate('endDate')" > 
                            <mat-icon>close</mat-icon>
                        </button>
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                        <!-- <mat-error *ngIf="this.addForm.controls['ExpiryDate'].status=='INVALID'">
                            {{ 'label_mustbe' |translate}} </mat-error> -->
                            <mat-error *ngIf="addForm.controls['ExpiryDate'].hasError('required') && addForm.controls['ExpiryDate'].touched && !addForm.controls['ExpiryDate'].hasError('matDatepickerParse')"> {{'label_cardExpiryDate'|translate}} {{'label_errorreqired'|translate}} </mat-error>
                            <mat-error *ngIf="addForm.controls['ExpiryDate'].hasError('invalidDate') && !addForm.controls['ExpiryDate'].hasError('required')"> {{'label_invalidDate' | translate}} </mat-error>
                            <mat-error *ngIf="addForm.controls['ExpiryDate'].hasError('matDatepickerParse') && !addForm.controls['ExpiryDate'].hasError('matDatepickerMax')"> {{'label_invalidDate' | translate}}</mat-error>
                            <mat-error *ngIf="addForm.controls['ExpiryDate'].hasError('matDatepickerMax') && !addForm.controls['ExpiryDate'].hasError('invalidDate')"> {{'label_cardExpiryDate' | translate}} {{'label_shouldNotMoreThanExp' | translate}}</mat-error>
                            <mat-error *ngIf="addForm.controls['ExpiryDate'].hasError('matDatepickerMin') && !addForm.controls['ExpiryDate'].hasError('invalidDate')"> {{'label_cardExpiryDate' | translate}} {{'label_mustbeStartDate' | translate}} </mat-error>
                    </mat-form-field>
            </div>
            </form>
        </div>
    </mat-dialog-content>
    <mat-divider></mat-divider>
    <div mat-dialog-actions align="end" class="button-row actionBoxFooter">
        <button mat-stroked-button color="warn" tabindex type="button" (click)="onDismiss()" id="btnCancel">
            {{'button_cancel'|translate}}</button>
        <button mat-raised-button tabindex="5" class="buttonForDesktopMobile" color="primary" 
            (click)="onSave(this.addForm.value)" type="button" id="btnSave" [disabled]="!addForm.valid">
            <mat-icon>check</mat-icon>
            <span class="buttonTxt">{{'label_save'|translate}}</span>
        </button>
    </div>
</div>